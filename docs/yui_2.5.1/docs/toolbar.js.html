<head><title>API: editor   toolbar.js  (YUI Library)</title><link rel="stylesheet" type="text/css" href="assets/api.css"><script type="text/javascript" src="assets/api-js"></script><script type="text/javascript" src="assets/ac-js"></script></head><body id="yahoo-com"><div style="background: none repeat scroll 0 0 #355E95; border: 1px solid #B6CDE1; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3); color: #FFF; font: 177% Helvetica,Arial,sans-serif; margin: 0; padding: 0; text-align: center; white-space: nowrap; line-height: 1.2em;">
<p style="margin: 1em;">YUI recommends <a style="text-decoration: none; color: #F29752;" href="http://yuilibrary.com/">YUI 3.</a></p>
<p style="margin: 1em;">YUI 2 has been <a style="text-decoration: none; color: #F29752;" href="http://www.yuiblog.com/blog/2011/04/13/announcing-yui-2-9-0/">deprecated</a> since 2011. This site acts as an archive for files and documentation.</p>
</div><div id="doc3" class="yui-t2">

	<div id="hd">
        <a href="http://developer.yahoo.com/yui/"><h1>Yahoo! UI Library</h1></a>
        <h3>editorÂ  <span class="subtitle">2.5.1</span></h3>
        <p>
        <a href="./index.html">Yahoo! UI Library</a> 
            &gt; <a href="./module_editor.html">editor</a>
                
                 &gt; toolbar.js (source view) 
            </p>

	</div>

	<div id="bd">
		<div id="yui-main">
			<div class="yui-b">
            <form name="yui-classopts-form">
    <span id="classopts"><input type="checkbox" name="showprivate" id="showprivate"> Show Private</span>
    <span id="classopts"><input type="checkbox" name="showprotected" id="showprotected"> Show Protected</span>
            </form>

                    <div id="srcout">
                        <style>
                            #doc3 #classopts { display:none; }
                        </style><div class="highlight"><pre><span class="c">/**</span>
<span class="c"> * @description &lt;p&gt;Creates a rich Toolbar widget based on Button. Primarily used with the Rich Text Editor&lt;/p&gt;</span>
<span class="c"> * @namespace YAHOO.widget</span>
<span class="c"> * @requires yahoo, dom, element, event, toolbarbutton</span>
<span class="c"> * @optional container_core, dragdrop</span>
<span class="c"> * @beta</span>
<span class="c"> */</span>
<span class="o">(</span><span class="k">function</span><span class="o">()</span> <span class="o">{</span>
    <span class="c">/**</span>
<span class="c">    * @private</span>
<span class="c">    **/</span>
<span class="k">var</span> <span class="nx">Dom</span> <span class="o">=</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">util</span><span class="o">.</span><span class="nx">Dom</span><span class="o">,</span>
    <span class="nx">Event</span> <span class="o">=</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">util</span><span class="o">.</span><span class="nx">Event</span><span class="o">,</span>
    <span class="nx">Lang</span> <span class="o">=</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">lang</span><span class="o">;</span>
    
    <span class="k">var</span> <span class="nx">getButton</span> <span class="o">=</span> <span class="k">function</span><span class="o">(</span><span class="nx">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">var</span> <span class="nx">button</span> <span class="o">=</span> <span class="nx">id</span><span class="o">;</span>
        <span class="k">if</span> <span class="o">(</span><span class="nx">Lang</span><span class="o">.</span><span class="nx">isString</span><span class="o">(</span><span class="nx">id</span><span class="o">))</span> <span class="o">{</span>
            <span class="nx">button</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">getButtonById</span><span class="o">(</span><span class="nx">id</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">(</span><span class="nx">Lang</span><span class="o">.</span><span class="nx">isNumber</span><span class="o">(</span><span class="nx">id</span><span class="o">))</span> <span class="o">{</span>
            <span class="nx">button</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">getButtonByIndex</span><span class="o">(</span><span class="nx">id</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">((!(</span><span class="nx">button</span> <span class="k">instanceof</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">widget</span><span class="o">.</span><span class="nx">ToolbarButton</span><span class="o">))</span> <span class="o">&amp;&amp;</span> <span class="o">(!(</span><span class="nx">button</span> <span class="k">instanceof</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">widget</span><span class="o">.</span><span class="nx">ToolbarButtonAdvanced</span><span class="o">)))</span> <span class="o">{</span>
            <span class="nx">button</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">getButtonByValue</span><span class="o">(</span><span class="nx">id</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">if</span> <span class="o">((</span><span class="nx">button</span> <span class="k">instanceof</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">widget</span><span class="o">.</span><span class="nx">ToolbarButton</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="nx">button</span> <span class="k">instanceof</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">widget</span><span class="o">.</span><span class="nx">ToolbarButtonAdvanced</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="nx">button</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">};</span>

    <span class="c">/**</span>
<span class="c">     * Provides a rich toolbar widget based on the button and menu widgets</span>
<span class="c">     * @constructor</span>
<span class="c">     * @class Toolbar</span>
<span class="c">     * @extends YAHOO.util.Element</span>
<span class="c">     * @param {String/HTMLElement} el The element to turn into a toolbar.</span>
<span class="c">     * @param {Object} attrs Object liternal containing configuration parameters.</span>
<span class="c">    */</span>
    <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">widget</span><span class="o">.</span><span class="nx">Toolbar</span> <span class="o">=</span> <span class="k">function</span><span class="o">(</span><span class="nx">el</span><span class="o">,</span> <span class="nx">attrs</span><span class="o">)</span> <span class="o">{</span>
        <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">log</span><span class="o">(</span><span class="s1">'Toolbar Initalizing'</span><span class="o">,</span> <span class="s1">'info'</span><span class="o">,</span> <span class="s1">'Toolbar'</span><span class="o">);</span>
        <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">log</span><span class="o">(</span><span class="nx">arguments</span><span class="o">.</span><span class="nx">length</span> <span class="o">+</span> <span class="s1">' arguments passed to constructor'</span><span class="o">,</span> <span class="s1">'info'</span><span class="o">,</span> <span class="s1">'Toolbar'</span><span class="o">);</span>
        
        <span class="k">if</span> <span class="o">(</span><span class="nx">Lang</span><span class="o">.</span><span class="nx">isObject</span><span class="o">(</span><span class="nx">arguments</span><span class="o">[</span><span class="m">0</span><span class="o">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">Dom</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="nx">el</span><span class="o">).</span><span class="nx">nodeType</span><span class="o">)</span> <span class="o">{</span>
            <span class="nx">attrs</span> <span class="o">=</span> <span class="nx">el</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">var</span> <span class="nx">local_attrs</span> <span class="o">=</span> <span class="o">(</span><span class="nx">attrs</span> <span class="o">||</span> <span class="o">{});</span>

        <span class="k">var</span> <span class="nx">oConfig</span> <span class="o">=</span> <span class="o">{</span>
            <span class="nx">element</span><span class="o">:</span> <span class="kc">null</span><span class="o">,</span>
            <span class="nx">attributes</span><span class="o">:</span> <span class="nx">local_attrs</span>
        <span class="o">};</span>
        
        
        <span class="k">if</span> <span class="o">(</span><span class="nx">Lang</span><span class="o">.</span><span class="nx">isString</span><span class="o">(</span><span class="nx">el</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="nx">Dom</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="nx">el</span><span class="o">))</span> <span class="o">{</span>
            <span class="nx">oConfig</span><span class="o">.</span><span class="nx">element</span> <span class="o">=</span> <span class="nx">Dom</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="nx">el</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="nx">Lang</span><span class="o">.</span><span class="nx">isObject</span><span class="o">(</span><span class="nx">el</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="nx">Dom</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="nx">el</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="nx">Dom</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="nx">el</span><span class="o">).</span><span class="nx">nodeType</span><span class="o">)</span> <span class="o">{</span>  
            <span class="nx">oConfig</span><span class="o">.</span><span class="nx">element</span> <span class="o">=</span> <span class="nx">Dom</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="nx">el</span><span class="o">);</span>
        <span class="o">}</span>
        

        <span class="k">if</span> <span class="o">(!</span><span class="nx">oConfig</span><span class="o">.</span><span class="nx">element</span><span class="o">)</span> <span class="o">{</span>
            <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">log</span><span class="o">(</span><span class="s1">'No element defined, creating toolbar container'</span><span class="o">,</span> <span class="s1">'warn'</span><span class="o">,</span> <span class="s1">'Toolbar'</span><span class="o">);</span>
            <span class="nx">oConfig</span><span class="o">.</span><span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="o">.</span><span class="nx">createElement</span><span class="o">(</span><span class="s1">'DIV'</span><span class="o">);</span>
            <span class="nx">oConfig</span><span class="o">.</span><span class="nx">element</span><span class="o">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">Dom</span><span class="o">.</span><span class="nx">generateId</span><span class="o">();</span>
            
            <span class="k">if</span> <span class="o">(</span><span class="nx">local_attrs</span><span class="o">.</span><span class="nx">container</span> <span class="o">&amp;&amp;</span> <span class="nx">Dom</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="nx">local_attrs</span><span class="o">.</span><span class="nx">container</span><span class="o">))</span> <span class="o">{</span>
                <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">log</span><span class="o">(</span><span class="s1">'Container found in config appending to it ('</span> <span class="o">+</span> <span class="nx">Dom</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="nx">local_attrs</span><span class="o">.</span><span class="nx">container</span><span class="o">).</span><span class="nx">id</span> <span class="o">+</span> <span class="s1">')'</span><span class="o">,</span> <span class="s1">'info'</span><span class="o">,</span> <span class="s1">'Toolbar'</span><span class="o">);</span>
                <span class="nx">Dom</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="nx">local_attrs</span><span class="o">.</span><span class="nx">container</span><span class="o">).</span><span class="nx">appendChild</span><span class="o">(</span><span class="nx">oConfig</span><span class="o">.</span><span class="nx">element</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        

        <span class="k">if</span> <span class="o">(!</span><span class="nx">oConfig</span><span class="o">.</span><span class="nx">element</span><span class="o">.</span><span class="nx">id</span><span class="o">)</span> <span class="o">{</span>
            <span class="nx">oConfig</span><span class="o">.</span><span class="nx">element</span><span class="o">.</span><span class="nx">id</span> <span class="o">=</span> <span class="o">((</span><span class="nx">Lang</span><span class="o">.</span><span class="nx">isString</span><span class="o">(</span><span class="nx">el</span><span class="o">))</span> <span class="o">?</span> <span class="nx">el</span> <span class="o">:</span> <span class="nx">Dom</span><span class="o">.</span><span class="nx">generateId</span><span class="o">());</span>
            <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">log</span><span class="o">(</span><span class="s1">'No element ID defined for toolbar container, creating..'</span><span class="o">,</span> <span class="s1">'warn'</span><span class="o">,</span> <span class="s1">'Toolbar'</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">log</span><span class="o">(</span><span class="s1">'Initing toolbar with id: '</span> <span class="o">+</span> <span class="nx">oConfig</span><span class="o">.</span><span class="nx">element</span><span class="o">.</span><span class="nx">id</span><span class="o">,</span> <span class="s1">'info'</span><span class="o">,</span> <span class="s1">'Toolbar'</span><span class="o">);</span>
        
        <span class="k">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nb">document</span><span class="o">.</span><span class="nx">createElement</span><span class="o">(</span><span class="s1">'fieldset'</span><span class="o">);</span>
        <span class="k">var</span> <span class="nx">lg</span> <span class="o">=</span> <span class="nb">document</span><span class="o">.</span><span class="nx">createElement</span><span class="o">(</span><span class="s1">'legend'</span><span class="o">);</span>
        <span class="nx">lg</span><span class="o">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">'Toolbar'</span><span class="o">;</span>
        <span class="nx">fs</span><span class="o">.</span><span class="nx">appendChild</span><span class="o">(</span><span class="nx">lg</span><span class="o">);</span>
        
        <span class="k">var</span> <span class="nx">cont</span> <span class="o">=</span> <span class="nb">document</span><span class="o">.</span><span class="nx">createElement</span><span class="o">(</span><span class="s1">'DIV'</span><span class="o">);</span>
        <span class="nx">oConfig</span><span class="o">.</span><span class="nx">attributes</span><span class="o">.</span><span class="nx">cont</span> <span class="o">=</span> <span class="nx">cont</span><span class="o">;</span>
        <span class="nx">Dom</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="nx">cont</span><span class="o">,</span> <span class="s1">'yui-toolbar-subcont'</span><span class="o">);</span>
        <span class="nx">fs</span><span class="o">.</span><span class="nx">appendChild</span><span class="o">(</span><span class="nx">cont</span><span class="o">);</span>
        <span class="nx">oConfig</span><span class="o">.</span><span class="nx">element</span><span class="o">.</span><span class="nx">appendChild</span><span class="o">(</span><span class="nx">fs</span><span class="o">);</span>

        <span class="nx">oConfig</span><span class="o">.</span><span class="nx">element</span><span class="o">.</span><span class="nx">tabIndex</span> <span class="o">=</span> <span class="o">-</span><span class="m">1</span><span class="o">;</span>

        
        <span class="nx">oConfig</span><span class="o">.</span><span class="nx">attributes</span><span class="o">.</span><span class="nx">element</span> <span class="o">=</span> <span class="nx">oConfig</span><span class="o">.</span><span class="nx">element</span><span class="o">;</span>
        <span class="nx">oConfig</span><span class="o">.</span><span class="nx">attributes</span><span class="o">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">oConfig</span><span class="o">.</span><span class="nx">element</span><span class="o">.</span><span class="nx">id</span><span class="o">;</span>

        <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">widget</span><span class="o">.</span><span class="nx">Toolbar</span><span class="o">.</span><span class="nx">superclass</span><span class="o">.</span><span class="nx">constructor</span><span class="o">.</span><span class="nx">call</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="nx">oConfig</span><span class="o">.</span><span class="nx">element</span><span class="o">,</span> <span class="nx">oConfig</span><span class="o">.</span><span class="nx">attributes</span><span class="o">);</span>
         
    <span class="o">};</span>

    <span class="c">/**</span>
<span class="c">    * @method _addMenuClasses</span>
<span class="c">    * @private</span>
<span class="c">    * @description This method is called from Menu's renderEvent to add a few more classes to the menu items</span>
<span class="c">    * @param {String} ev The event that fired.</span>
<span class="c">    * @param {Array} na Array of event information.</span>
<span class="c">    * @param {Object} o Button config object. </span>
<span class="c">    */</span>

    <span class="k">function</span> <span class="nx">_addMenuClasses</span><span class="o">(</span><span class="nx">ev</span><span class="o">,</span> <span class="nx">na</span><span class="o">,</span> <span class="nx">o</span><span class="o">)</span> <span class="o">{</span>
        <span class="nx">Dom</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">element</span><span class="o">,</span> <span class="s1">'yui-toolbar-'</span> <span class="o">+</span> <span class="nx">o</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'value'</span><span class="o">)</span> <span class="o">+</span> <span class="s1">'-menu'</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="nx">Dom</span><span class="o">.</span><span class="nx">hasClass</span><span class="o">(</span><span class="nx">o</span><span class="o">.</span><span class="nx">_button</span><span class="o">.</span><span class="nx">parentNode</span><span class="o">.</span><span class="nx">parentNode</span><span class="o">,</span> <span class="s1">'yui-toolbar-select'</span><span class="o">))</span> <span class="o">{</span>
            <span class="nx">Dom</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">element</span><span class="o">,</span> <span class="s1">'yui-toolbar-select-menu'</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">var</span> <span class="nx">items</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">getItems</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="m">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">items</span><span class="o">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nx">Dom</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="nx">items</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">element</span><span class="o">,</span> <span class="s1">'yui-toolbar-'</span> <span class="o">+</span> <span class="nx">o</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'value'</span><span class="o">)</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="o">((</span><span class="nx">items</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">value</span><span class="o">)</span> <span class="o">?</span> <span class="nx">items</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">value</span><span class="o">.</span><span class="nx">replace</span><span class="o">(</span><span class="sr">/ /g</span><span class="o">,</span> <span class="s1">'-'</span><span class="o">).</span><span class="nx">toLowerCase</span><span class="o">()</span> <span class="o">:</span> <span class="nx">items</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">_oText</span><span class="o">.</span><span class="nx">nodeValue</span><span class="o">.</span><span class="nx">replace</span><span class="o">(</span><span class="sr">/ /g</span><span class="o">,</span> <span class="s1">'-'</span><span class="o">).</span><span class="nx">toLowerCase</span><span class="o">()));</span>
            <span class="nx">Dom</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="nx">items</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">element</span><span class="o">,</span> <span class="s1">'yui-toolbar-'</span> <span class="o">+</span> <span class="nx">o</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'value'</span><span class="o">)</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="o">((</span><span class="nx">items</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">value</span><span class="o">)</span> <span class="o">?</span> <span class="nx">items</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">value</span><span class="o">.</span><span class="nx">replace</span><span class="o">(</span><span class="sr">/ /g</span><span class="o">,</span> <span class="s1">'-'</span><span class="o">)</span> <span class="o">:</span> <span class="nx">items</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">_oText</span><span class="o">.</span><span class="nx">nodeValue</span><span class="o">.</span><span class="nx">replace</span><span class="o">(</span><span class="sr">/ /g</span><span class="o">,</span> <span class="s1">'-'</span><span class="o">)));</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">extend</span><span class="o">(</span><span class="nx">YAHOO</span><span class="o">.</span><span class="nx">widget</span><span class="o">.</span><span class="nx">Toolbar</span><span class="o">,</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">util</span><span class="o">.</span><span class="nx">Element</span><span class="o">,</span> <span class="o">{</span>
        <span class="c">/** </span>
<span class="c">        * @property buttonType</span>
<span class="c">        * @description The default button to use</span>
<span class="c">        * @type Object</span>
<span class="c">        */</span>
        <span class="nx">buttonType</span><span class="o">:</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">widget</span><span class="o">.</span><span class="nx">ToolbarButton</span><span class="o">,</span>
        <span class="c">/** </span>
<span class="c">        * @property dd</span>
<span class="c">        * @description The DragDrop instance associated with the Toolbar</span>
<span class="c">        * @type Object</span>
<span class="c">        */</span>
        <span class="nx">dd</span><span class="o">:</span> <span class="kc">null</span><span class="o">,</span>
        <span class="c">/** </span>
<span class="c">        * @property _colorData</span>
<span class="c">        * @description Object reference containing colors hex and text values.</span>
<span class="c">        * @type Object</span>
<span class="c">        */</span>
        <span class="nx">_colorData</span><span class="o">:</span> <span class="o">{</span>
<span class="c">/* {{{ _colorData */</span>
    <span class="s1">'#111111'</span><span class="o">:</span> <span class="s1">'Obsidian'</span><span class="o">,</span>
    <span class="s1">'#2D2D2D'</span><span class="o">:</span> <span class="s1">'Dark Gray'</span><span class="o">,</span>
    <span class="s1">'#434343'</span><span class="o">:</span> <span class="s1">'Shale'</span><span class="o">,</span>
    <span class="s1">'#5B5B5B'</span><span class="o">:</span> <span class="s1">'Flint'</span><span class="o">,</span>
    <span class="s1">'#737373'</span><span class="o">:</span> <span class="s1">'Gray'</span><span class="o">,</span>
    <span class="s1">'#8B8B8B'</span><span class="o">:</span> <span class="s1">'Concrete'</span><span class="o">,</span>
    <span class="s1">'#A2A2A2'</span><span class="o">:</span> <span class="s1">'Gray'</span><span class="o">,</span>
    <span class="s1">'#B9B9B9'</span><span class="o">:</span> <span class="s1">'Titanium'</span><span class="o">,</span>
    <span class="s1">'#000000'</span><span class="o">:</span> <span class="s1">'Black'</span><span class="o">,</span>
    <span class="s1">'#D0D0D0'</span><span class="o">:</span> <span class="s1">'Light Gray'</span><span class="o">,</span>
    <span class="s1">'#E6E6E6'</span><span class="o">:</span> <span class="s1">'Silver'</span><span class="o">,</span>
    <span class="s1">'#FFFFFF'</span><span class="o">:</span> <span class="s1">'White'</span><span class="o">,</span>
    <span class="s1">'#BFBF00'</span><span class="o">:</span> <span class="s1">'Pumpkin'</span><span class="o">,</span>
    <span class="s1">'#FFFF00'</span><span class="o">:</span> <span class="s1">'Yellow'</span><span class="o">,</span>
    <span class="s1">'#FFFF40'</span><span class="o">:</span> <span class="s1">'Banana'</span><span class="o">,</span>
    <span class="s1">'#FFFF80'</span><span class="o">:</span> <span class="s1">'Pale Yellow'</span><span class="o">,</span>
    <span class="s1">'#FFFFBF'</span><span class="o">:</span> <span class="s1">'Butter'</span><span class="o">,</span>
    <span class="s1">'#525330'</span><span class="o">:</span> <span class="s1">'Raw Siena'</span><span class="o">,</span>
    <span class="s1">'#898A49'</span><span class="o">:</span> <span class="s1">'Mildew'</span><span class="o">,</span>
    <span class="s1">'#AEA945'</span><span class="o">:</span> <span class="s1">'Olive'</span><span class="o">,</span>
    <span class="s1">'#7F7F00'</span><span class="o">:</span> <span class="s1">'Paprika'</span><span class="o">,</span>
    <span class="s1">'#C3BE71'</span><span class="o">:</span> <span class="s1">'Earth'</span><span class="o">,</span>
    <span class="s1">'#E0DCAA'</span><span class="o">:</span> <span class="s1">'Khaki'</span><span class="o">,</span>
    <span class="s1">'#FCFAE1'</span><span class="o">:</span> <span class="s1">'Cream'</span><span class="o">,</span>
    <span class="s1">'#60BF00'</span><span class="o">:</span> <span class="s1">'Cactus'</span><span class="o">,</span>
    <span class="s1">'#80FF00'</span><span class="o">:</span> <span class="s1">'Chartreuse'</span><span class="o">,</span>
    <span class="s1">'#A0FF40'</span><span class="o">:</span> <span class="s1">'Green'</span><span class="o">,</span>
    <span class="s1">'#C0FF80'</span><span class="o">:</span> <span class="s1">'Pale Lime'</span><span class="o">,</span>
    <span class="s1">'#DFFFBF'</span><span class="o">:</span> <span class="s1">'Light Mint'</span><span class="o">,</span>
    <span class="s1">'#3B5738'</span><span class="o">:</span> <span class="s1">'Green'</span><span class="o">,</span>
    <span class="s1">'#668F5A'</span><span class="o">:</span> <span class="s1">'Lime Gray'</span><span class="o">,</span>
    <span class="s1">'#7F9757'</span><span class="o">:</span> <span class="s1">'Yellow'</span><span class="o">,</span>
    <span class="s1">'#407F00'</span><span class="o">:</span> <span class="s1">'Clover'</span><span class="o">,</span>
    <span class="s1">'#8A9B55'</span><span class="o">:</span> <span class="s1">'Pistachio'</span><span class="o">,</span>
    <span class="s1">'#B7C296'</span><span class="o">:</span> <span class="s1">'Light Jade'</span><span class="o">,</span>
    <span class="s1">'#E6EBD5'</span><span class="o">:</span> <span class="s1">'Breakwater'</span><span class="o">,</span>
    <span class="s1">'#00BF00'</span><span class="o">:</span> <span class="s1">'Spring Frost'</span><span class="o">,</span>
    <span class="s1">'#00FF80'</span><span class="o">:</span> <span class="s1">'Pastel Green'</span><span class="o">,</span>
    <span class="s1">'#40FFA0'</span><span class="o">:</span> <span class="s1">'Light Emerald'</span><span class="o">,</span>
    <span class="s1">'#80FFC0'</span><span class="o">:</span> <span class="s1">'Sea Foam'</span><span class="o">,</span>
    <span class="s1">'#BFFFDF'</span><span class="o">:</span> <span class="s1">'Sea Mist'</span><span class="o">,</span>
    <span class="s1">'#033D21'</span><span class="o">:</span> <span class="s1">'Dark Forrest'</span><span class="o">,</span>
    <span class="s1">'#438059'</span><span class="o">:</span> <span class="s1">'Moss'</span><span class="o">,</span>
    <span class="s1">'#7FA37C'</span><span class="o">:</span> <span class="s1">'Medium Green'</span><span class="o">,</span>
    <span class="s1">'#007F40'</span><span class="o">:</span> <span class="s1">'Pine'</span><span class="o">,</span>
    <span class="s1">'#8DAE94'</span><span class="o">:</span> <span class="s1">'Yellow Gray Green'</span><span class="o">,</span>
    <span class="s1">'#ACC6B5'</span><span class="o">:</span> <span class="s1">'Aqua Lung'</span><span class="o">,</span>
    <span class="s1">'#DDEBE2'</span><span class="o">:</span> <span class="s1">'Sea Vapor'</span><span class="o">,</span>
    <span class="s1">'#00BFBF'</span><span class="o">:</span> <span class="s1">'Fog'</span><span class="o">,</span>
    <span class="s1">'#00FFFF'</span><span class="o">:</span> <span class="s1">'Cyan'</span><span class="o">,</span>
    <span class="s1">'#40FFFF'</span><span class="o">:</span> <span class="s1">'Turquoise Blue'</span><span class="o">,</span>
    <span class="s1">'#80FFFF'</span><span class="o">:</span> <span class="s1">'Light Aqua'</span><span class="o">,</span>
    <span class="s1">'#BFFFFF'</span><span class="o">:</span> <span class="s1">'Pale Cyan'</span><span class="o">,</span>
    <span class="s1">'#033D3D'</span><span class="o">:</span> <span class="s1">'Dark Teal'</span><span class="o">,</span>
    <span class="s1">'#347D7E'</span><span class="o">:</span> <span class="s1">'Gray Turquoise'</span><span class="o">,</span>
    <span class="s1">'#609A9F'</span><span class="o">:</span> <span class="s1">'Green Blue'</span><span class="o">,</span>
    <span class="s1">'#007F7F'</span><span class="o">:</span> <span class="s1">'Seaweed'</span><span class="o">,</span>
    <span class="s1">'#96BDC4'</span><span class="o">:</span> <span class="s1">'Green Gray'</span><span class="o">,</span>
    <span class="s1">'#B5D1D7'</span><span class="o">:</span> <span class="s1">'Soapstone'</span><span class="o">,</span>
    <span class="s1">'#E2F1F4'</span><span class="o">:</span> <span class="s1">'Light Turquoise'</span><span class="o">,</span>
    <span class="s1">'#0060BF'</span><span class="o">:</span> <span class="s1">'Summer Sky'</span><span class="o">,</span>
    <span class="s1">'#0080FF'</span><span class="o">:</span> <span class="s1">'Sky Blue'</span><span class="o">,</span>
    <span class="s1">'#40A0FF'</span><span class="o">:</span> <span class="s1">'Electric Blue'</span><span class="o">,</span>
    <span class="s1">'#80C0FF'</span><span class="o">:</span> <span class="s1">'Light Azure'</span><span class="o">,</span>
    <span class="s1">'#BFDFFF'</span><span class="o">:</span> <span class="s1">'Ice Blue'</span><span class="o">,</span>
    <span class="s1">'#1B2C48'</span><span class="o">:</span> <span class="s1">'Navy'</span><span class="o">,</span>
    <span class="s1">'#385376'</span><span class="o">:</span> <span class="s1">'Biscay'</span><span class="o">,</span>
    <span class="s1">'#57708F'</span><span class="o">:</span> <span class="s1">'Dusty Blue'</span><span class="o">,</span>
    <span class="s1">'#00407F'</span><span class="o">:</span> <span class="s1">'Sea Blue'</span><span class="o">,</span>
    <span class="s1">'#7792AC'</span><span class="o">:</span> <span class="s1">'Sky Blue Gray'</span><span class="o">,</span>
    <span class="s1">'#A8BED1'</span><span class="o">:</span> <span class="s1">'Morning Sky'</span><span class="o">,</span>
    <span class="s1">'#DEEBF6'</span><span class="o">:</span> <span class="s1">'Vapor'</span><span class="o">,</span>
    <span class="s1">'#0000BF'</span><span class="o">:</span> <span class="s1">'Deep Blue'</span><span class="o">,</span>
    <span class="s1">'#0000FF'</span><span class="o">:</span> <span class="s1">'Blue'</span><span class="o">,</span>
    <span class="s1">'#4040FF'</span><span class="o">:</span> <span class="s1">'Cerulean Blue'</span><span class="o">,</span>
    <span class="s1">'#8080FF'</span><span class="o">:</span> <span class="s1">'Evening Blue'</span><span class="o">,</span>
    <span class="s1">'#BFBFFF'</span><span class="o">:</span> <span class="s1">'Light Blue'</span><span class="o">,</span>
    <span class="s1">'#212143'</span><span class="o">:</span> <span class="s1">'Deep Indigo'</span><span class="o">,</span>
    <span class="s1">'#373E68'</span><span class="o">:</span> <span class="s1">'Sea Blue'</span><span class="o">,</span>
    <span class="s1">'#444F75'</span><span class="o">:</span> <span class="s1">'Night Blue'</span><span class="o">,</span>
    <span class="s1">'#00007F'</span><span class="o">:</span> <span class="s1">'Indigo Blue'</span><span class="o">,</span>
    <span class="s1">'#585E82'</span><span class="o">:</span> <span class="s1">'Dockside'</span><span class="o">,</span>
    <span class="s1">'#8687A4'</span><span class="o">:</span> <span class="s1">'Blue Gray'</span><span class="o">,</span>
    <span class="s1">'#D2D1E1'</span><span class="o">:</span> <span class="s1">'Light Blue Gray'</span><span class="o">,</span>
    <span class="s1">'#6000BF'</span><span class="o">:</span> <span class="s1">'Neon Violet'</span><span class="o">,</span>
    <span class="s1">'#8000FF'</span><span class="o">:</span> <span class="s1">'Blue Violet'</span><span class="o">,</span>
    <span class="s1">'#A040FF'</span><span class="o">:</span> <span class="s1">'Violet Purple'</span><span class="o">,</span>
    <span class="s1">'#C080FF'</span><span class="o">:</span> <span class="s1">'Violet Dusk'</span><span class="o">,</span>
    <span class="s1">'#DFBFFF'</span><span class="o">:</span> <span class="s1">'Pale Lavender'</span><span class="o">,</span>
    <span class="s1">'#302449'</span><span class="o">:</span> <span class="s1">'Cool Shale'</span><span class="o">,</span>
    <span class="s1">'#54466F'</span><span class="o">:</span> <span class="s1">'Dark Indigo'</span><span class="o">,</span>
    <span class="s1">'#655A7F'</span><span class="o">:</span> <span class="s1">'Dark Violet'</span><span class="o">,</span>
    <span class="s1">'#40007F'</span><span class="o">:</span> <span class="s1">'Violet'</span><span class="o">,</span>
    <span class="s1">'#726284'</span><span class="o">:</span> <span class="s1">'Smoky Violet'</span><span class="o">,</span>
    <span class="s1">'#9E8FA9'</span><span class="o">:</span> <span class="s1">'Slate Gray'</span><span class="o">,</span>
    <span class="s1">'#DCD1DF'</span><span class="o">:</span> <span class="s1">'Violet White'</span><span class="o">,</span>
    <span class="s1">'#BF00BF'</span><span class="o">:</span> <span class="s1">'Royal Violet'</span><span class="o">,</span>
    <span class="s1">'#FF00FF'</span><span class="o">:</span> <span class="s1">'Fuchsia'</span><span class="o">,</span>
    <span class="s1">'#FF40FF'</span><span class="o">:</span> <span class="s1">'Magenta'</span><span class="o">,</span>
    <span class="s1">'#FF80FF'</span><span class="o">:</span> <span class="s1">'Orchid'</span><span class="o">,</span>
    <span class="s1">'#FFBFFF'</span><span class="o">:</span> <span class="s1">'Pale Magenta'</span><span class="o">,</span>
    <span class="s1">'#4A234A'</span><span class="o">:</span> <span class="s1">'Dark Purple'</span><span class="o">,</span>
    <span class="s1">'#794A72'</span><span class="o">:</span> <span class="s1">'Medium Purple'</span><span class="o">,</span>
    <span class="s1">'#936386'</span><span class="o">:</span> <span class="s1">'Cool Granite'</span><span class="o">,</span>
    <span class="s1">'#7F007F'</span><span class="o">:</span> <span class="s1">'Purple'</span><span class="o">,</span>
    <span class="s1">'#9D7292'</span><span class="o">:</span> <span class="s1">'Purple Moon'</span><span class="o">,</span>
    <span class="s1">'#C0A0B6'</span><span class="o">:</span> <span class="s1">'Pale Purple'</span><span class="o">,</span>
    <span class="s1">'#ECDAE5'</span><span class="o">:</span> <span class="s1">'Pink Cloud'</span><span class="o">,</span>
    <span class="s1">'#BF005F'</span><span class="o">:</span> <span class="s1">'Hot Pink'</span><span class="o">,</span>
    <span class="s1">'#FF007F'</span><span class="o">:</span> <span class="s1">'Deep Pink'</span><span class="o">,</span>
    <span class="s1">'#FF409F'</span><span class="o">:</span> <span class="s1">'Grape'</span><span class="o">,</span>
    <span class="s1">'#FF80BF'</span><span class="o">:</span> <span class="s1">'Electric Pink'</span><span class="o">,</span>
    <span class="s1">'#FFBFDF'</span><span class="o">:</span> <span class="s1">'Pink'</span><span class="o">,</span>
    <span class="s1">'#451528'</span><span class="o">:</span> <span class="s1">'Purple Red'</span><span class="o">,</span>
    <span class="s1">'#823857'</span><span class="o">:</span> <span class="s1">'Purple Dino'</span><span class="o">,</span>
    <span class="s1">'#A94A76'</span><span class="o">:</span> <span class="s1">'Purple Gray'</span><span class="o">,</span>
    <span class="s1">'#7F003F'</span><span class="o">:</span> <span class="s1">'Rose'</span><span class="o">,</span>
    <span class="s1">'#BC6F95'</span><span class="o">:</span> <span class="s1">'Antique Mauve'</span><span class="o">,</span>
    <span class="s1">'#D8A5BB'</span><span class="o">:</span> <span class="s1">'Cool Marble'</span><span class="o">,</span>
    <span class="s1">'#F7DDE9'</span><span class="o">:</span> <span class="s1">'Pink Granite'</span><span class="o">,</span>
    <span class="s1">'#C00000'</span><span class="o">:</span> <span class="s1">'Apple'</span><span class="o">,</span>
    <span class="s1">'#FF0000'</span><span class="o">:</span> <span class="s1">'Fire Truck'</span><span class="o">,</span>
    <span class="s1">'#FF4040'</span><span class="o">:</span> <span class="s1">'Pale Red'</span><span class="o">,</span>
    <span class="s1">'#FF8080'</span><span class="o">:</span> <span class="s1">'Salmon'</span><span class="o">,</span>
    <span class="s1">'#FFC0C0'</span><span class="o">:</span> <span class="s1">'Warm Pink'</span><span class="o">,</span>
    <span class="s1">'#441415'</span><span class="o">:</span> <span class="s1">'Sepia'</span><span class="o">,</span>
    <span class="s1">'#82393C'</span><span class="o">:</span> <span class="s1">'Rust'</span><span class="o">,</span>
    <span class="s1">'#AA4D4E'</span><span class="o">:</span> <span class="s1">'Brick'</span><span class="o">,</span>
    <span class="s1">'#800000'</span><span class="o">:</span> <span class="s1">'Brick Red'</span><span class="o">,</span>
    <span class="s1">'#BC6E6E'</span><span class="o">:</span> <span class="s1">'Mauve'</span><span class="o">,</span>
    <span class="s1">'#D8A3A4'</span><span class="o">:</span> <span class="s1">'Shrimp Pink'</span><span class="o">,</span>
    <span class="s1">'#F8DDDD'</span><span class="o">:</span> <span class="s1">'Shell Pink'</span><span class="o">,</span>
    <span class="s1">'#BF5F00'</span><span class="o">:</span> <span class="s1">'Dark Orange'</span><span class="o">,</span>
    <span class="s1">'#FF7F00'</span><span class="o">:</span> <span class="s1">'Orange'</span><span class="o">,</span>
    <span class="s1">'#FF9F40'</span><span class="o">:</span> <span class="s1">'Grapefruit'</span><span class="o">,</span>
    <span class="s1">'#FFBF80'</span><span class="o">:</span> <span class="s1">'Canteloupe'</span><span class="o">,</span>
    <span class="s1">'#FFDFBF'</span><span class="o">:</span> <span class="s1">'Wax'</span><span class="o">,</span>
    <span class="s1">'#482C1B'</span><span class="o">:</span> <span class="s1">'Dark Brick'</span><span class="o">,</span>
    <span class="s1">'#855A40'</span><span class="o">:</span> <span class="s1">'Dirt'</span><span class="o">,</span>
    <span class="s1">'#B27C51'</span><span class="o">:</span> <span class="s1">'Tan'</span><span class="o">,</span>
    <span class="s1">'#7F3F00'</span><span class="o">:</span> <span class="s1">'Nutmeg'</span><span class="o">,</span>
    <span class="s1">'#C49B71'</span><span class="o">:</span> <span class="s1">'Mustard'</span><span class="o">,</span>
    <span class="s1">'#E1C4A8'</span><span class="o">:</span> <span class="s1">'Pale Tan'</span><span class="o">,</span>
    <span class="s1">'#FDEEE0'</span><span class="o">:</span> <span class="s1">'Marble'</span>
<span class="c">/* }}} */</span>
        <span class="o">},</span>
        <span class="c">/** </span>
<span class="c">        * @property _colorPicker</span>
<span class="c">        * @description The HTML Element containing the colorPicker</span>
<span class="c">        * @type HTMLElement</span>
<span class="c">        */</span>
        <span class="nx">_colorPicker</span><span class="o">:</span> <span class="kc">null</span><span class="o">,</span>
        <span class="c">/** </span>
<span class="c">        * @property STR_COLLAPSE</span>
<span class="c">        * @description String for Toolbar Collapse Button</span>
<span class="c">        * @type String</span>
<span class="c">        */</span>
        <span class="nx">STR_COLLAPSE</span><span class="o">:</span> <span class="s1">'Collapse Toolbar'</span><span class="o">,</span>
        <span class="c">/** </span>
<span class="c">        * @property STR_SPIN_LABEL</span>
<span class="c">        * @description String for spinbutton dynamic label. Note the {VALUE} will be replaced with YAHOO.lang.substitute</span>
<span class="c">        * @type String</span>
<span class="c">        */</span>
        <span class="nx">STR_SPIN_LABEL</span><span class="o">:</span> <span class="s1">'Spin Button with value {VALUE}. Use Control Shift Up Arrow and Control Shift Down arrow keys to increase or decrease the value.'</span><span class="o">,</span>
        <span class="c">/** </span>
<span class="c">        * @property STR_SPIN_UP</span>
<span class="c">        * @description String for spinbutton up</span>
<span class="c">        * @type String</span>
<span class="c">        */</span>
        <span class="nx">STR_SPIN_UP</span><span class="o">:</span> <span class="s1">'Click to increase the value of this input'</span><span class="o">,</span>
        <span class="c">/** </span>
<span class="c">        * @property STR_SPIN_DOWN</span>
<span class="c">        * @description String for spinbutton down</span>
<span class="c">        * @type String</span>
<span class="c">        */</span>
        <span class="nx">STR_SPIN_DOWN</span><span class="o">:</span> <span class="s1">'Click to decrease the value of this input'</span><span class="o">,</span>
        <span class="c">/** </span>
<span class="c">        * @property _titlebar</span>
<span class="c">        * @description Object reference to the titlebar</span>
<span class="c">        * @type HTMLElement</span>
<span class="c">        */</span>
        <span class="nx">_titlebar</span><span class="o">:</span> <span class="kc">null</span><span class="o">,</span>
        <span class="c">/** </span>
<span class="c">        * @property browser</span>
<span class="c">        * @description Standard browser detection</span>
<span class="c">        * @type Object</span>
<span class="c">        */</span>
        <span class="nx">browser</span><span class="o">:</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">env</span><span class="o">.</span><span class="nx">ua</span><span class="o">,</span>
        <span class="c">/**</span>
<span class="c">        * @protected</span>
<span class="c">        * @property _buttonList</span>
<span class="c">        * @description Internal property list of current buttons in the toolbar</span>
<span class="c">        * @type Array</span>
<span class="c">        */</span>
        <span class="nx">_buttonList</span><span class="o">:</span> <span class="kc">null</span><span class="o">,</span>
        <span class="c">/**</span>
<span class="c">        * @protected</span>
<span class="c">        * @property _buttonGroupList</span>
<span class="c">        * @description Internal property list of current button groups in the toolbar</span>
<span class="c">        * @type Array</span>
<span class="c">        */</span>
        <span class="nx">_buttonGroupList</span><span class="o">:</span> <span class="kc">null</span><span class="o">,</span>
        <span class="c">/**</span>
<span class="c">        * @protected</span>
<span class="c">        * @property _sep</span>
<span class="c">        * @description Internal reference to the separator HTML Element for cloning</span>
<span class="c">        * @type HTMLElement</span>
<span class="c">        */</span>
        <span class="nx">_sep</span><span class="o">:</span> <span class="kc">null</span><span class="o">,</span>
        <span class="c">/**</span>
<span class="c">        * @protected</span>
<span class="c">        * @property _sepCount</span>
<span class="c">        * @description Internal refernce for counting separators, so we can give them a useful class name for styling</span>
<span class="c">        * @type Number</span>
<span class="c">        */</span>
        <span class="nx">_sepCount</span><span class="o">:</span> <span class="kc">null</span><span class="o">,</span>
        <span class="c">/**</span>
<span class="c">        * @protected</span>
<span class="c">        * @property draghandle</span>
<span class="c">        * @type HTMLElement</span>
<span class="c">        */</span>
        <span class="nx">_dragHandle</span><span class="o">:</span> <span class="kc">null</span><span class="o">,</span>
        <span class="c">/**</span>
<span class="c">        * @protected</span>
<span class="c">        * @property _toolbarConfigs</span>
<span class="c">        * @type Object</span>
<span class="c">        */</span>
        <span class="nx">_toolbarConfigs</span><span class="o">:</span> <span class="o">{</span>
            <span class="nx">renderer</span><span class="o">:</span> <span class="kc">true</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @protected</span>
<span class="c">        * @property CLASS_CONTAINER</span>
<span class="c">        * @description Default CSS class to apply to the toolbar container element</span>
<span class="c">        * @type String</span>
<span class="c">        */</span>
        <span class="nx">CLASS_CONTAINER</span><span class="o">:</span> <span class="s1">'yui-toolbar-container'</span><span class="o">,</span>
        <span class="c">/**</span>
<span class="c">        * @protected</span>
<span class="c">        * @property CLASS_DRAGHANDLE</span>
<span class="c">        * @description Default CSS class to apply to the toolbar's drag handle element</span>
<span class="c">        * @type String</span>
<span class="c">        */</span>
        <span class="nx">CLASS_DRAGHANDLE</span><span class="o">:</span> <span class="s1">'yui-toolbar-draghandle'</span><span class="o">,</span>
        <span class="c">/**</span>
<span class="c">        * @protected</span>
<span class="c">        * @property CLASS_SEPARATOR</span>
<span class="c">        * @description Default CSS class to apply to all separators in the toolbar</span>
<span class="c">        * @type String</span>
<span class="c">        */</span>
        <span class="nx">CLASS_SEPARATOR</span><span class="o">:</span> <span class="s1">'yui-toolbar-separator'</span><span class="o">,</span>
        <span class="c">/**</span>
<span class="c">        * @protected</span>
<span class="c">        * @property CLASS_DISABLED</span>
<span class="c">        * @description Default CSS class to apply when the toolbar is disabled</span>
<span class="c">        * @type String</span>
<span class="c">        */</span>
        <span class="nx">CLASS_DISABLED</span><span class="o">:</span> <span class="s1">'yui-toolbar-disabled'</span><span class="o">,</span>
        <span class="c">/**</span>
<span class="c">        * @protected</span>
<span class="c">        * @property CLASS_PREFIX</span>
<span class="c">        * @description Default prefix for dynamically created class names</span>
<span class="c">        * @type String</span>
<span class="c">        */</span>
        <span class="nx">CLASS_PREFIX</span><span class="o">:</span> <span class="s1">'yui-toolbar'</span><span class="o">,</span>
        <span class="c">/** </span>
<span class="c">        * @method init</span>
<span class="c">        * @description The Toolbar class's initialization method</span>
<span class="c">        */</span>
        <span class="nx">init</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">p_oElement</span><span class="o">,</span> <span class="nx">p_oAttributes</span><span class="o">)</span> <span class="o">{</span>
            <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">widget</span><span class="o">.</span><span class="nx">Toolbar</span><span class="o">.</span><span class="nx">superclass</span><span class="o">.</span><span class="nx">init</span><span class="o">.</span><span class="nx">call</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="nx">p_oElement</span><span class="o">,</span> <span class="nx">p_oAttributes</span><span class="o">);</span>

        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method initAttributes</span>
<span class="c">        * @description Initializes all of the configuration attributes used to create </span>
<span class="c">        * the toolbar.</span>
<span class="c">        * @param {Object} attr Object literal specifying a set of </span>
<span class="c">        * configuration attributes used to create the toolbar.</span>
<span class="c">        */</span>
        <span class="nx">initAttributes</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">attr</span><span class="o">)</span> <span class="o">{</span>
            <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">widget</span><span class="o">.</span><span class="nx">Toolbar</span><span class="o">.</span><span class="nx">superclass</span><span class="o">.</span><span class="nx">initAttributes</span><span class="o">.</span><span class="nx">call</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="nx">attr</span><span class="o">);</span>
            <span class="k">this</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">CLASS_CONTAINER</span><span class="o">);</span>

            <span class="c">/**</span>
<span class="c">            * @attribute buttonType</span>
<span class="c">            * @description The buttonType to use (advanced or basic)</span>
<span class="c">            * @type String</span>
<span class="c">            */</span>
            <span class="k">this</span><span class="o">.</span><span class="nx">setAttributeConfig</span><span class="o">(</span><span class="s1">'buttonType'</span><span class="o">,</span> <span class="o">{</span>
                <span class="nx">value</span><span class="o">:</span> <span class="nx">attr</span><span class="o">.</span><span class="nx">buttonType</span> <span class="o">||</span> <span class="s1">'basic'</span><span class="o">,</span>
                <span class="nx">writeOnce</span><span class="o">:</span> <span class="kc">true</span><span class="o">,</span>
                <span class="nx">validator</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">type</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nx">switch</span> <span class="o">(</span><span class="nx">type</span><span class="o">)</span> <span class="o">{</span>
                        <span class="nx">case</span> <span class="s1">'advanced'</span><span class="o">:</span>
                        <span class="nx">case</span> <span class="s1">'basic'</span><span class="o">:</span>
                            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
                    <span class="o">}</span>
                    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
                <span class="o">},</span>
                <span class="nx">method</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">type</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">'advanced'</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">if</span> <span class="o">(</span><span class="nx">YAHOO</span><span class="o">.</span><span class="nx">widget</span><span class="o">.</span><span class="nx">Button</span><span class="o">)</span> <span class="o">{</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">buttonType</span> <span class="o">=</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">widget</span><span class="o">.</span><span class="nx">ToolbarButtonAdvanced</span><span class="o">;</span>
                        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                            <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">log</span><span class="o">(</span><span class="s1">'Can not find YAHOO.widget.Button'</span><span class="o">,</span> <span class="s1">'error'</span><span class="o">,</span> <span class="s1">'Toolbar'</span><span class="o">);</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">buttonType</span> <span class="o">=</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">widget</span><span class="o">.</span><span class="nx">ToolbarButton</span><span class="o">;</span>
                        <span class="o">}</span>
                    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="k">this</span><span class="o">.</span><span class="nx">buttonType</span> <span class="o">=</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">widget</span><span class="o">.</span><span class="nx">ToolbarButton</span><span class="o">;</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">});</span>


            <span class="c">/**</span>
<span class="c">            * @attribute buttons</span>
<span class="c">            * @description Object specifying the buttons to include in the toolbar</span>
<span class="c">            * Example:</span>
<span class="c">            * &lt;code&gt;&lt;pre&gt;</span>
<span class="c">            * {</span>
<span class="c">            *   { id: 'b3', type: 'button', label: 'Underline', value: 'underline' },</span>
<span class="c">            *   { type: 'separator' },</span>
<span class="c">            *   { id: 'b4', type: 'menu', label: 'Align', value: 'align',</span>
<span class="c">            *       menu: [</span>
<span class="c">            *           { text: "Left", value: 'alignleft' },</span>
<span class="c">            *           { text: "Center", value: 'aligncenter' },</span>
<span class="c">            *           { text: "Right", value: 'alignright' }</span>
<span class="c">            *       ]</span>
<span class="c">            *   }</span>
<span class="c">            * }</span>
<span class="c">            * &lt;/pre&gt;&lt;/code&gt;</span>
<span class="c">            * @type Array</span>
<span class="c">            */</span>
            
            <span class="k">this</span><span class="o">.</span><span class="nx">setAttributeConfig</span><span class="o">(</span><span class="s1">'buttons'</span><span class="o">,</span> <span class="o">{</span>
                <span class="nx">value</span><span class="o">:</span> <span class="o">[],</span>
                <span class="nx">writeOnce</span><span class="o">:</span> <span class="kc">true</span><span class="o">,</span>
                <span class="nx">method</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">data</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">data</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">if</span> <span class="o">(</span><span class="nx">Lang</span><span class="o">.</span><span class="nx">hasOwnProperty</span><span class="o">(</span><span class="nx">data</span><span class="o">,</span> <span class="nx">i</span><span class="o">))</span> <span class="o">{</span>
                            <span class="k">if</span> <span class="o">(</span><span class="nx">data</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">'separator'</span><span class="o">)</span> <span class="o">{</span>
                                <span class="k">this</span><span class="o">.</span><span class="nx">addSeparator</span><span class="o">();</span>
                            <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="nx">data</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="o">)</span> <span class="o">{</span>
                                <span class="k">this</span><span class="o">.</span><span class="nx">addButtonGroup</span><span class="o">(</span><span class="nx">data</span><span class="o">[</span><span class="nx">i</span><span class="o">]);</span>
                            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                                <span class="k">this</span><span class="o">.</span><span class="nx">addButton</span><span class="o">(</span><span class="nx">data</span><span class="o">[</span><span class="nx">i</span><span class="o">]);</span>
                            <span class="o">}</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">});</span>

            <span class="c">/**</span>
<span class="c">            * @attribute disabled</span>
<span class="c">            * @description Boolean indicating if the toolbar should be disabled. It will also disable the draggable attribute if it is on.</span>
<span class="c">            * @default false</span>
<span class="c">            * @type Boolean</span>
<span class="c">            */</span>
            <span class="k">this</span><span class="o">.</span><span class="nx">setAttributeConfig</span><span class="o">(</span><span class="s1">'disabled'</span><span class="o">,</span> <span class="o">{</span>
                <span class="nx">value</span><span class="o">:</span> <span class="kc">false</span><span class="o">,</span>
                <span class="nx">method</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">disabled</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'disabled'</span><span class="o">)</span> <span class="o">===</span> <span class="nx">disabled</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
                    <span class="o">}</span>
                    <span class="k">if</span> <span class="o">(</span><span class="nx">disabled</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">this</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">CLASS_DISABLED</span><span class="o">);</span>
                        <span class="k">this</span><span class="o">.</span><span class="nx">set</span><span class="o">(</span><span class="s1">'draggable'</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
                        <span class="k">this</span><span class="o">.</span><span class="nx">disableAllButtons</span><span class="o">();</span>
                    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="k">this</span><span class="o">.</span><span class="nx">removeClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">CLASS_DISABLED</span><span class="o">);</span>
                        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_configs</span><span class="o">.</span><span class="nx">draggable</span><span class="o">.</span><span class="nx">_initialConfig</span><span class="o">.</span><span class="nx">value</span><span class="o">)</span> <span class="o">{</span>
                            <span class="c">//Draggable by default, set it back</span>
<span class="c"></span>                            <span class="k">this</span><span class="o">.</span><span class="nx">set</span><span class="o">(</span><span class="s1">'draggable'</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
                        <span class="o">}</span>
                        <span class="k">this</span><span class="o">.</span><span class="nx">resetAllButtons</span><span class="o">();</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">});</span>

            <span class="c">/**</span>
<span class="c">            * @config cont</span>
<span class="c">            * @description The container for the toolbar.</span>
<span class="c">            * @type HTMLElement</span>
<span class="c">            */</span>
            <span class="k">this</span><span class="o">.</span><span class="nx">setAttributeConfig</span><span class="o">(</span><span class="s1">'cont'</span><span class="o">,</span> <span class="o">{</span>
                <span class="nx">value</span><span class="o">:</span> <span class="nx">attr</span><span class="o">.</span><span class="nx">cont</span><span class="o">,</span>
                <span class="nx">readOnly</span><span class="o">:</span> <span class="kc">true</span>
            <span class="o">});</span>


            <span class="c">/**</span>
<span class="c">            * @attribute grouplabels</span>
<span class="c">            * @description Boolean indicating if the toolbar should show the group label's text string.</span>
<span class="c">            * @default true</span>
<span class="c">            * @type Boolean</span>
<span class="c">            */</span>
            <span class="k">this</span><span class="o">.</span><span class="nx">setAttributeConfig</span><span class="o">(</span><span class="s1">'grouplabels'</span><span class="o">,</span> <span class="o">{</span>
                <span class="nx">value</span><span class="o">:</span> <span class="o">((</span><span class="nx">attr</span><span class="o">.</span><span class="nx">grouplabels</span> <span class="o">===</span> <span class="kc">false</span><span class="o">)</span> <span class="o">?</span> <span class="kc">false</span> <span class="o">:</span> <span class="kc">true</span><span class="o">),</span>
                <span class="nx">method</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">grouplabels</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="nx">grouplabels</span><span class="o">)</span> <span class="o">{</span>
                        <span class="nx">Dom</span><span class="o">.</span><span class="nx">removeClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'cont'</span><span class="o">),</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">CLASS_PREFIX</span> <span class="o">+</span> <span class="s1">'-nogrouplabels'</span><span class="o">));</span>
                    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="nx">Dom</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'cont'</span><span class="o">),</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">CLASS_PREFIX</span> <span class="o">+</span> <span class="s1">'-nogrouplabels'</span><span class="o">));</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">});</span>
            <span class="c">/**</span>
<span class="c">            * @attribute titlebar</span>
<span class="c">            * @description Boolean indicating if the toolbar should have a titlebar. If</span>
<span class="c">            * passed a string, it will use that as the titlebar text</span>
<span class="c">            * @default false</span>
<span class="c">            * @type Boolean or String</span>
<span class="c">            */</span>
            <span class="k">this</span><span class="o">.</span><span class="nx">setAttributeConfig</span><span class="o">(</span><span class="s1">'titlebar'</span><span class="o">,</span> <span class="o">{</span>
                <span class="nx">value</span><span class="o">:</span> <span class="kc">false</span><span class="o">,</span>
                <span class="nx">method</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">titlebar</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="nx">titlebar</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">.</span><span class="nx">parentNode</span><span class="o">)</span> <span class="o">{</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">.</span><span class="nx">parentNode</span><span class="o">.</span><span class="nx">removeChild</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">);</span>
                        <span class="o">}</span>
                        <span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span> <span class="o">=</span> <span class="nb">document</span><span class="o">.</span><span class="nx">createElement</span><span class="o">(</span><span class="s1">'DIV'</span><span class="o">);</span>
                        <span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">.</span><span class="nx">tabIndex</span> <span class="o">=</span> <span class="s1">'-1'</span><span class="o">;</span>
                        <span class="nx">Event</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">,</span> <span class="s1">'focus'</span><span class="o">,</span> <span class="k">function</span><span class="o">()</span> <span class="o">{</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">_handleFocus</span><span class="o">();</span>
                        <span class="o">},</span> <span class="k">this</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
                        <span class="nx">Dom</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="nx">CLASS_PREFIX</span> <span class="o">+</span> <span class="s1">'-titlebar'</span><span class="o">);</span>
                        <span class="k">if</span> <span class="o">(</span><span class="nx">Lang</span><span class="o">.</span><span class="nx">isString</span><span class="o">(</span><span class="nx">titlebar</span><span class="o">))</span> <span class="o">{</span>
                            <span class="k">var</span> <span class="nx">h2</span> <span class="o">=</span> <span class="nb">document</span><span class="o">.</span><span class="nx">createElement</span><span class="o">(</span><span class="s1">'h2'</span><span class="o">);</span>
                            <span class="nx">h2</span><span class="o">.</span><span class="nx">tabIndex</span> <span class="o">=</span> <span class="s1">'-1'</span><span class="o">;</span>
                            <span class="nx">h2</span><span class="o">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">'&lt;a href="#" tabIndex="0"&gt;'</span> <span class="o">+</span> <span class="nx">titlebar</span> <span class="o">+</span> <span class="s1">'&lt;/a&gt;'</span><span class="o">;</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">.</span><span class="nx">appendChild</span><span class="o">(</span><span class="nx">h2</span><span class="o">);</span>
                            <span class="nx">Event</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="nx">h2</span><span class="o">.</span><span class="nx">firstChild</span><span class="o">,</span> <span class="s1">'click'</span><span class="o">,</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
                                <span class="nx">Event</span><span class="o">.</span><span class="nx">stopEvent</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
                            <span class="o">});</span>
                            <span class="nx">Event</span><span class="o">.</span><span class="nx">on</span><span class="o">([</span><span class="nx">h2</span><span class="o">,</span> <span class="nx">h2</span><span class="o">.</span><span class="nx">firstChild</span><span class="o">],</span> <span class="s1">'focus'</span><span class="o">,</span> <span class="k">function</span><span class="o">()</span> <span class="o">{</span>
                                <span class="k">this</span><span class="o">.</span><span class="nx">_handleFocus</span><span class="o">();</span>
                            <span class="o">},</span> <span class="k">this</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
                        <span class="o">}</span>
                        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'firstChild'</span><span class="o">))</span> <span class="o">{</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">insertBefore</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'firstChild'</span><span class="o">));</span>
                        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">appendChild</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">);</span>
                        <span class="o">}</span>
                        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'collapse'</span><span class="o">))</span> <span class="o">{</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">set</span><span class="o">(</span><span class="s1">'collapse'</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
                        <span class="o">}</span>
                    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">.</span><span class="nx">parentNode</span><span class="o">)</span> <span class="o">{</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">.</span><span class="nx">parentNode</span><span class="o">.</span><span class="nx">removeChild</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">);</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">});</span>


            <span class="c">/**</span>
<span class="c">            * @attribute collapse</span>
<span class="c">            * @description Boolean indicating if the the titlebar should have a collapse button.</span>
<span class="c">            * The collapse button will not remove the toolbar, it will minimize it to the titlebar</span>
<span class="c">            * @default false</span>
<span class="c">            * @type Boolean</span>
<span class="c">            */</span>
            <span class="k">this</span><span class="o">.</span><span class="nx">setAttributeConfig</span><span class="o">(</span><span class="s1">'collapse'</span><span class="o">,</span> <span class="o">{</span>
                <span class="nx">value</span><span class="o">:</span> <span class="kc">false</span><span class="o">,</span>
                <span class="nx">method</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">collapse</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">var</span> <span class="nx">collapseEl</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
                        <span class="k">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">Dom</span><span class="o">.</span><span class="nx">getElementsByClassName</span><span class="o">(</span><span class="s1">'collapse'</span><span class="o">,</span> <span class="s1">'span'</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">);</span>
                        <span class="k">if</span> <span class="o">(</span><span class="nx">collapse</span><span class="o">)</span> <span class="o">{</span>
                            <span class="k">if</span> <span class="o">(</span><span class="nx">el</span><span class="o">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="m">0</span><span class="o">)</span> <span class="o">{</span>
                                <span class="c">//There is already a collapse button</span>
<span class="c"></span>                                <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
                            <span class="o">}</span>
                            <span class="nx">collapseEl</span> <span class="o">=</span> <span class="nb">document</span><span class="o">.</span><span class="nx">createElement</span><span class="o">(</span><span class="s1">'SPAN'</span><span class="o">);</span>
                            <span class="nx">collapseEl</span><span class="o">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">'X'</span><span class="o">;</span>
                            <span class="nx">collapseEl</span><span class="o">.</span><span class="nx">title</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">STR_COLLAPSE</span><span class="o">;</span>

                            <span class="nx">Dom</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="nx">collapseEl</span><span class="o">,</span> <span class="s1">'collapse'</span><span class="o">);</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">.</span><span class="nx">appendChild</span><span class="o">(</span><span class="nx">collapseEl</span><span class="o">);</span>
                            <span class="nx">Event</span><span class="o">.</span><span class="nx">addListener</span><span class="o">(</span><span class="nx">collapseEl</span><span class="o">,</span> <span class="s1">'click'</span><span class="o">,</span> <span class="k">function</span><span class="o">()</span> <span class="o">{</span>
                                <span class="k">if</span> <span class="o">(</span><span class="nx">Dom</span><span class="o">.</span><span class="nx">hasClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'cont'</span><span class="o">).</span><span class="nx">parentNode</span><span class="o">,</span> <span class="s1">'yui-toolbar-container-collapsed'</span><span class="o">))</span> <span class="o">{</span>
                                    <span class="k">this</span><span class="o">.</span><span class="nx">collapse</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span> <span class="c">//Expand Toolbar</span>
<span class="c"></span>                                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                                    <span class="k">this</span><span class="o">.</span><span class="nx">collapse</span><span class="o">();</span> <span class="c">//Collapse Toolbar</span>
<span class="c"></span>                                <span class="o">}</span>
                            <span class="o">},</span> <span class="k">this</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
                        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                            <span class="nx">collapseEl</span> <span class="o">=</span> <span class="nx">Dom</span><span class="o">.</span><span class="nx">getElementsByClassName</span><span class="o">(</span><span class="s1">'collapse'</span><span class="o">,</span> <span class="s1">'span'</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">);</span>
                            <span class="k">if</span> <span class="o">(</span><span class="nx">collapseEl</span><span class="o">[</span><span class="m">0</span><span class="o">])</span> <span class="o">{</span>
                                <span class="k">if</span> <span class="o">(</span><span class="nx">Dom</span><span class="o">.</span><span class="nx">hasClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'cont'</span><span class="o">).</span><span class="nx">parentNode</span><span class="o">,</span> <span class="s1">'yui-toolbar-container-collapsed'</span><span class="o">))</span> <span class="o">{</span>
                                    <span class="c">//We are closed, reopen the titlebar..</span>
<span class="c"></span>                                    <span class="k">this</span><span class="o">.</span><span class="nx">collapse</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span> <span class="c">//Expand Toolbar</span>
<span class="c"></span>                                <span class="o">}</span>
                                <span class="nx">collapseEl</span><span class="o">[</span><span class="m">0</span><span class="o">].</span><span class="nx">parentNode</span><span class="o">.</span><span class="nx">removeChild</span><span class="o">(</span><span class="nx">collapseEl</span><span class="o">[</span><span class="m">0</span><span class="o">]);</span>
                            <span class="o">}</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">});</span>

            <span class="c">/**</span>
<span class="c">            * @attribute draggable</span>
<span class="c">            * @description Boolean indicating if the toolbar should be draggable.  </span>
<span class="c">            * @default false</span>
<span class="c">            * @type Boolean</span>
<span class="c">            */</span>

            <span class="k">this</span><span class="o">.</span><span class="nx">setAttributeConfig</span><span class="o">(</span><span class="s1">'draggable'</span><span class="o">,</span> <span class="o">{</span>
                <span class="nx">value</span><span class="o">:</span> <span class="o">(</span><span class="nx">attr</span><span class="o">.</span><span class="nx">draggable</span> <span class="o">||</span> <span class="kc">false</span><span class="o">),</span>
                <span class="nx">method</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">draggable</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="nx">draggable</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'titlebar'</span><span class="o">))</span> <span class="o">{</span>
                        <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">log</span><span class="o">(</span><span class="s1">'Dragging enabled'</span><span class="o">,</span> <span class="s1">'info'</span><span class="o">,</span> <span class="s1">'Toolbar'</span><span class="o">);</span>
                        <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="nx">_dragHandle</span><span class="o">)</span> <span class="o">{</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">_dragHandle</span> <span class="o">=</span> <span class="nb">document</span><span class="o">.</span><span class="nx">createElement</span><span class="o">(</span><span class="s1">'SPAN'</span><span class="o">);</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">_dragHandle</span><span class="o">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">'|'</span><span class="o">;</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">_dragHandle</span><span class="o">.</span><span class="nx">setAttribute</span><span class="o">(</span><span class="s1">'title'</span><span class="o">,</span> <span class="s1">'Click to drag the toolbar'</span><span class="o">);</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">_dragHandle</span><span class="o">.</span><span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'id'</span><span class="o">)</span> <span class="o">+</span> <span class="s1">'_draghandle'</span><span class="o">;</span>
                            <span class="nx">Dom</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_dragHandle</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="nx">CLASS_DRAGHANDLE</span><span class="o">);</span>
                            <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'cont'</span><span class="o">).</span><span class="nx">hasChildNodes</span><span class="o">())</span> <span class="o">{</span>
                                <span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'cont'</span><span class="o">).</span><span class="nx">insertBefore</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_dragHandle</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'cont'</span><span class="o">).</span><span class="nx">firstChild</span><span class="o">);</span>
                            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                                <span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'cont'</span><span class="o">).</span><span class="nx">appendChild</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_dragHandle</span><span class="o">);</span>
                            <span class="o">}</span>
                            <span class="c">/**</span>
<span class="c">                            * @property dd</span>
<span class="c">                            * @description The DragDrop instance associated with the Toolbar</span>
<span class="c">                            * @type Object</span>
<span class="c">                            */</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">dd</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">util</span><span class="o">.</span><span class="nx">DD</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'id'</span><span class="o">));</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">dd</span><span class="o">.</span><span class="nx">setHandleElId</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_dragHandle</span><span class="o">.</span><span class="nx">id</span><span class="o">);</span>
                            
                        <span class="o">}</span>
                    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">log</span><span class="o">(</span><span class="s1">'Dragging disabled'</span><span class="o">,</span> <span class="s1">'info'</span><span class="o">,</span> <span class="s1">'Toolbar'</span><span class="o">);</span>
                        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_dragHandle</span><span class="o">)</span> <span class="o">{</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">_dragHandle</span><span class="o">.</span><span class="nx">parentNode</span><span class="o">.</span><span class="nx">removeChild</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_dragHandle</span><span class="o">);</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">_dragHandle</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">dd</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">if</span> <span class="o">(</span><span class="nx">draggable</span><span class="o">)</span> <span class="o">{</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">dd</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">util</span><span class="o">.</span><span class="nx">DD</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'id'</span><span class="o">));</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">dd</span><span class="o">.</span><span class="nx">setHandleElId</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">);</span>
                            <span class="nx">Dom</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">,</span> <span class="s1">'draggable'</span><span class="o">);</span>
                        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                            <span class="nx">Dom</span><span class="o">.</span><span class="nx">removeClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">,</span> <span class="s1">'draggable'</span><span class="o">);</span>
                            <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">dd</span><span class="o">)</span> <span class="o">{</span>
                                <span class="k">this</span><span class="o">.</span><span class="nx">dd</span><span class="o">.</span><span class="nx">unreg</span><span class="o">();</span>
                                <span class="k">this</span><span class="o">.</span><span class="nx">dd</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
                            <span class="o">}</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">},</span>
                <span class="nx">validator</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">value</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                    <span class="k">if</span> <span class="o">(!</span><span class="nx">YAHOO</span><span class="o">.</span><span class="nx">util</span><span class="o">.</span><span class="nx">DD</span><span class="o">)</span> <span class="o">{</span>
                        <span class="nx">ret</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
                    <span class="o">}</span>
                    <span class="k">return</span> <span class="nx">ret</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">});</span>

        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method addButtonGroup</span>
<span class="c">        * @description Add a new button group to the toolbar. (uses addButton)</span>
<span class="c">        * @param {Object} oGroup Object literal reference to the Groups Config (contains an array of button configs as well as the group label)</span>
<span class="c">        */</span>
        <span class="nx">addButtonGroup</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">oGroup</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="nx">_queue</span><span class="o">[</span><span class="k">this</span><span class="o">.</span><span class="nx">_queue</span><span class="o">.</span><span class="nx">length</span><span class="o">]</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'addButtonGroup'</span><span class="o">,</span> <span class="nx">arguments</span><span class="o">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
            
            <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="nx">hasClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">CLASS_PREFIX</span> <span class="o">+</span> <span class="s1">'-grouped'</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">CLASS_PREFIX</span> <span class="o">+</span> <span class="s1">'-grouped'</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="k">var</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="o">.</span><span class="nx">createElement</span><span class="o">(</span><span class="s1">'DIV'</span><span class="o">);</span>
            <span class="nx">Dom</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="nx">div</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="nx">CLASS_PREFIX</span> <span class="o">+</span> <span class="s1">'-group'</span><span class="o">);</span>
            <span class="nx">Dom</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="nx">div</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="nx">CLASS_PREFIX</span> <span class="o">+</span> <span class="s1">'-group-'</span> <span class="o">+</span> <span class="nx">oGroup</span><span class="o">.</span><span class="nx">group</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="nx">oGroup</span><span class="o">.</span><span class="k">label</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">var</span> <span class="k">label</span> <span class="o">=</span> <span class="nb">document</span><span class="o">.</span><span class="nx">createElement</span><span class="o">(</span><span class="s1">'h3'</span><span class="o">);</span>
                <span class="k">label</span><span class="o">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">oGroup</span><span class="o">.</span><span class="k">label</span><span class="o">;</span>
                <span class="nx">div</span><span class="o">.</span><span class="nx">appendChild</span><span class="o">(</span><span class="k">label</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'grouplabels'</span><span class="o">))</span> <span class="o">{</span>
                <span class="nx">Dom</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'cont'</span><span class="o">),</span> <span class="k">this</span><span class="o">.</span><span class="nx">CLASS_PREFIX</span><span class="o">,</span> <span class="s1">'-nogrouplabels'</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'cont'</span><span class="o">).</span><span class="nx">appendChild</span><span class="o">(</span><span class="nx">div</span><span class="o">);</span>

            <span class="c">//For accessibility, let's put all of the group buttons in an Unordered List</span>
<span class="c"></span>            <span class="k">var</span> <span class="nx">ul</span> <span class="o">=</span> <span class="nb">document</span><span class="o">.</span><span class="nx">createElement</span><span class="o">(</span><span class="s1">'ul'</span><span class="o">);</span>
            <span class="nx">div</span><span class="o">.</span><span class="nx">appendChild</span><span class="o">(</span><span class="nx">ul</span><span class="o">);</span>

            <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="nx">_buttonGroupList</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="nx">_buttonGroupList</span> <span class="o">=</span> <span class="o">{};</span>
            <span class="o">}</span>
            
            <span class="k">this</span><span class="o">.</span><span class="nx">_buttonGroupList</span><span class="o">[</span><span class="nx">oGroup</span><span class="o">.</span><span class="nx">group</span><span class="o">]</span> <span class="o">=</span> <span class="nx">ul</span><span class="o">;</span>

            <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="m">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">oGroup</span><span class="o">.</span><span class="nx">buttons</span><span class="o">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">var</span> <span class="nx">li</span> <span class="o">=</span> <span class="nb">document</span><span class="o">.</span><span class="nx">createElement</span><span class="o">(</span><span class="s1">'li'</span><span class="o">);</span>
                <span class="nx">li</span><span class="o">.</span><span class="nx">className</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">CLASS_PREFIX</span> <span class="o">+</span> <span class="s1">'-groupitem'</span><span class="o">;</span>
                <span class="nx">ul</span><span class="o">.</span><span class="nx">appendChild</span><span class="o">(</span><span class="nx">li</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">((</span><span class="nx">oGroup</span><span class="o">.</span><span class="nx">buttons</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">type</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="nx">oGroup</span><span class="o">.</span><span class="nx">buttons</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">'separator'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">this</span><span class="o">.</span><span class="nx">addSeparator</span><span class="o">(</span><span class="nx">li</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="nx">oGroup</span><span class="o">.</span><span class="nx">buttons</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">container</span> <span class="o">=</span> <span class="nx">li</span><span class="o">;</span>
                    <span class="k">this</span><span class="o">.</span><span class="nx">addButton</span><span class="o">(</span><span class="nx">oGroup</span><span class="o">.</span><span class="nx">buttons</span><span class="o">[</span><span class="nx">i</span><span class="o">]);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method addButtonToGroup</span>
<span class="c">        * @description Add a new button to a toolbar group. Buttons supported:</span>
<span class="c">        *   push, split, menu, select, color, spin</span>
<span class="c">        * @param {Object} oButton Object literal reference to the Button's Config</span>
<span class="c">        * @param {String} group The Group identifier passed into the initial config</span>
<span class="c">        * @param {HTMLElement} after Optional HTML element to insert this button after in the DOM.</span>
<span class="c">        */</span>
        <span class="nx">addButtonToGroup</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">oButton</span><span class="o">,</span> <span class="nx">group</span><span class="o">,</span> <span class="nx">after</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">var</span> <span class="nx">groupCont</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">_buttonGroupList</span><span class="o">[</span><span class="nx">group</span><span class="o">];</span>
            <span class="k">var</span> <span class="nx">li</span> <span class="o">=</span> <span class="nb">document</span><span class="o">.</span><span class="nx">createElement</span><span class="o">(</span><span class="s1">'li'</span><span class="o">);</span>
            <span class="nx">li</span><span class="o">.</span><span class="nx">className</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">CLASS_PREFIX</span> <span class="o">+</span> <span class="s1">'-groupitem'</span><span class="o">;</span>
            <span class="nx">oButton</span><span class="o">.</span><span class="nx">container</span> <span class="o">=</span> <span class="nx">li</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="nx">addButton</span><span class="o">(</span><span class="nx">oButton</span><span class="o">,</span> <span class="nx">after</span><span class="o">);</span>
            <span class="nx">groupCont</span><span class="o">.</span><span class="nx">appendChild</span><span class="o">(</span><span class="nx">li</span><span class="o">);</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method addButton</span>
<span class="c">        * @description Add a new button to the toolbar. Buttons supported:</span>
<span class="c">        *   push, split, menu, select, color, spin</span>
<span class="c">        * @param {Object} oButton Object literal reference to the Button's Config</span>
<span class="c">        * @param {HTMLElement} after Optional HTML element to insert this button after in the DOM.</span>
<span class="c">        */</span>
        <span class="nx">addButton</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">oButton</span><span class="o">,</span> <span class="nx">after</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="nx">_queue</span><span class="o">[</span><span class="k">this</span><span class="o">.</span><span class="nx">_queue</span><span class="o">.</span><span class="nx">length</span><span class="o">]</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'addButton'</span><span class="o">,</span> <span class="nx">arguments</span><span class="o">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span> <span class="o">=</span> <span class="o">[];</span>
            <span class="o">}</span>
            <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">log</span><span class="o">(</span><span class="s1">'Adding button of type: '</span> <span class="o">+</span> <span class="nx">oButton</span><span class="o">.</span><span class="nx">type</span><span class="o">,</span> <span class="s1">'info'</span><span class="o">,</span> <span class="s1">'Toolbar'</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(!</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">container</span><span class="o">)</span> <span class="o">{</span>
                <span class="nx">oButton</span><span class="o">.</span><span class="nx">container</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'cont'</span><span class="o">);</span>
            <span class="o">}</span>

            <span class="k">if</span> <span class="o">((</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">'menu'</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">'split'</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">'select'</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">Lang</span><span class="o">.</span><span class="nx">isArray</span><span class="o">(</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">menu</span><span class="o">))</span> <span class="o">{</span>
                    <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">oButton</span><span class="o">.</span><span class="nx">menu</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">if</span> <span class="o">(</span><span class="nx">Lang</span><span class="o">.</span><span class="nx">hasOwnProperty</span><span class="o">(</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">menu</span><span class="o">,</span> <span class="nx">i</span><span class="o">))</span> <span class="o">{</span>
                            <span class="k">var</span> <span class="nx">funcObject</span> <span class="o">=</span> <span class="o">{</span>
                                <span class="nx">fn</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">,</span> <span class="nx">x</span><span class="o">,</span> <span class="nx">oMenu</span><span class="o">)</span> <span class="o">{</span>
                                    <span class="k">if</span> <span class="o">(!</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">menucmd</span><span class="o">)</span> <span class="o">{</span>
                                        <span class="nx">oButton</span><span class="o">.</span><span class="nx">menucmd</span> <span class="o">=</span> <span class="nx">oButton</span><span class="o">.</span><span class="nx">value</span><span class="o">;</span>
                                    <span class="o">}</span>
                                    <span class="nx">oButton</span><span class="o">.</span><span class="nx">value</span> <span class="o">=</span> <span class="o">((</span><span class="nx">oMenu</span><span class="o">.</span><span class="nx">value</span><span class="o">)</span> <span class="o">?</span> <span class="nx">oMenu</span><span class="o">.</span><span class="nx">value</span> <span class="o">:</span> <span class="nx">oMenu</span><span class="o">.</span><span class="nx">_oText</span><span class="o">.</span><span class="nx">nodeValue</span><span class="o">);</span>
                                <span class="o">},</span>
                                <span class="nx">scope</span><span class="o">:</span> <span class="k">this</span>
                            <span class="o">};</span>
                            <span class="nx">oButton</span><span class="o">.</span><span class="nx">menu</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">onclick</span> <span class="o">=</span> <span class="nx">funcObject</span><span class="o">;</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="k">var</span> <span class="nx">_oButton</span> <span class="o">=</span> <span class="o">{},</span> <span class="nx">skip</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
            <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">o</span> <span class="k">in</span> <span class="nx">oButton</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">Lang</span><span class="o">.</span><span class="nx">hasOwnProperty</span><span class="o">(</span><span class="nx">oButton</span><span class="o">,</span> <span class="nx">o</span><span class="o">))</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="nx">_toolbarConfigs</span><span class="o">[</span><span class="nx">o</span><span class="o">])</span> <span class="o">{</span>
                        <span class="nx">_oButton</span><span class="o">[</span><span class="nx">o</span><span class="o">]</span> <span class="o">=</span> <span class="nx">oButton</span><span class="o">[</span><span class="nx">o</span><span class="o">];</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="k">if</span> <span class="o">(</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">'select'</span><span class="o">)</span> <span class="o">{</span>
                <span class="nx">_oButton</span><span class="o">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s1">'menu'</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">if</span> <span class="o">(</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">'spin'</span><span class="o">)</span> <span class="o">{</span>
                <span class="nx">_oButton</span><span class="o">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s1">'push'</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">if</span> <span class="o">(</span><span class="nx">_oButton</span><span class="o">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">'color'</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">YAHOO</span><span class="o">.</span><span class="nx">widget</span><span class="o">.</span><span class="nx">Overlay</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nx">_oButton</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">_makeColorButton</span><span class="o">(</span><span class="nx">_oButton</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="nx">skip</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="k">if</span> <span class="o">(</span><span class="nx">_oButton</span><span class="o">.</span><span class="nx">menu</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">((</span><span class="nx">YAHOO</span><span class="o">.</span><span class="nx">widget</span><span class="o">.</span><span class="nx">Overlay</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">menu</span> <span class="k">instanceof</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">widget</span><span class="o">.</span><span class="nx">Overlay</span><span class="o">))</span> <span class="o">{</span>
                    <span class="nx">oButton</span><span class="o">.</span><span class="nx">menu</span><span class="o">.</span><span class="nx">showEvent</span><span class="o">.</span><span class="nx">subscribe</span><span class="o">(</span><span class="k">function</span><span class="o">()</span> <span class="o">{</span>
                        <span class="k">this</span><span class="o">.</span><span class="nx">_button</span> <span class="o">=</span> <span class="nx">_oButton</span><span class="o">;</span>
                    <span class="o">});</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="m">0</span><span class="o">;</span> <span class="nx">m</span> <span class="o">&lt;</span> <span class="nx">_oButton</span><span class="o">.</span><span class="nx">menu</span><span class="o">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">m</span><span class="o">++)</span> <span class="o">{</span>
                        <span class="k">if</span> <span class="o">(!</span><span class="nx">_oButton</span><span class="o">.</span><span class="nx">menu</span><span class="o">[</span><span class="nx">m</span><span class="o">].</span><span class="nx">value</span><span class="o">)</span> <span class="o">{</span>
                            <span class="nx">_oButton</span><span class="o">.</span><span class="nx">menu</span><span class="o">[</span><span class="nx">m</span><span class="o">].</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">_oButton</span><span class="o">.</span><span class="nx">menu</span><span class="o">[</span><span class="nx">m</span><span class="o">].</span><span class="nx">text</span><span class="o">;</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">browser</span><span class="o">.</span><span class="nx">webkit</span><span class="o">)</span> <span class="o">{</span>
                        <span class="nx">_oButton</span><span class="o">.</span><span class="nx">focusmenu</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="k">if</span> <span class="o">(</span><span class="nx">skip</span><span class="o">)</span> <span class="o">{</span>
                <span class="nx">oButton</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="c">//Add to .get('buttons') manually</span>
<span class="c"></span>                <span class="k">this</span><span class="o">.</span><span class="nx">_configs</span><span class="o">.</span><span class="nx">buttons</span><span class="o">.</span><span class="nx">value</span><span class="o">[</span><span class="k">this</span><span class="o">.</span><span class="nx">_configs</span><span class="o">.</span><span class="nx">buttons</span><span class="o">.</span><span class="nx">value</span><span class="o">.</span><span class="nx">length</span><span class="o">]</span> <span class="o">=</span> <span class="nx">oButton</span><span class="o">;</span>
                
                <span class="k">var</span> <span class="nx">tmp</span> <span class="o">=</span> <span class="k">new</span> <span class="k">this</span><span class="o">.</span><span class="nx">buttonType</span><span class="o">(</span><span class="nx">_oButton</span><span class="o">);</span>
                <span class="nx">tmp</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">).</span><span class="nx">tabIndex</span> <span class="o">=</span> <span class="s1">'-1'</span><span class="o">;</span>
                <span class="nx">tmp</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">).</span><span class="nx">setAttribute</span><span class="o">(</span><span class="s1">'role'</span><span class="o">,</span> <span class="s1">'button'</span><span class="o">);</span>
                <span class="nx">tmp</span><span class="o">.</span><span class="nx">_selected</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                <span class="k">if</span> <span class="o">(!</span><span class="nx">tmp</span><span class="o">.</span><span class="nx">buttonType</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nx">tmp</span><span class="o">.</span><span class="nx">buttonType</span> <span class="o">=</span> <span class="s1">'rich'</span><span class="o">;</span>
                    <span class="nx">tmp</span><span class="o">.</span><span class="nx">checkValue</span> <span class="o">=</span> <span class="k">function</span><span class="o">(</span><span class="nx">value</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">var</span> <span class="nx">_menuItems</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">getMenu</span><span class="o">().</span><span class="nx">getItems</span><span class="o">();</span>
                        <span class="k">if</span> <span class="o">(</span><span class="nx">_menuItems</span><span class="o">.</span><span class="nx">length</span> <span class="o">===</span> <span class="m">0</span><span class="o">)</span> <span class="o">{</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">getMenu</span><span class="o">().</span><span class="nx">_onBeforeShow</span><span class="o">();</span>
                            <span class="nx">_menuItems</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">getMenu</span><span class="o">().</span><span class="nx">getItems</span><span class="o">();</span>
                        <span class="o">}</span>
                        <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="m">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">_menuItems</span><span class="o">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">i</span><span class="o">++)</span> <span class="o">{</span>
                            <span class="nx">_menuItems</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">cfg</span><span class="o">.</span><span class="nx">setProperty</span><span class="o">(</span><span class="s1">'checked'</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
                            <span class="k">if</span> <span class="o">(</span><span class="nx">_menuItems</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">value</span> <span class="o">==</span> <span class="nx">value</span><span class="o">)</span> <span class="o">{</span>
                                <span class="nx">_menuItems</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">cfg</span><span class="o">.</span><span class="nx">setProperty</span><span class="o">(</span><span class="s1">'checked'</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
                            <span class="o">}</span>
                        <span class="o">}</span>      
                    <span class="o">};</span>
                <span class="o">}</span>
                
                <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'disabled'</span><span class="o">))</span> <span class="o">{</span>
                    <span class="c">//Toolbar is disabled, disable the new button too!</span>
<span class="c"></span>                    <span class="nx">tmp</span><span class="o">.</span><span class="nx">set</span><span class="o">(</span><span class="s1">'disabled'</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="k">if</span> <span class="o">(!</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">id</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nx">oButton</span><span class="o">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">tmp</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'id'</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">log</span><span class="o">(</span><span class="s1">'Button created ('</span> <span class="o">+</span> <span class="nx">oButton</span><span class="o">.</span><span class="nx">type</span> <span class="o">+</span> <span class="s1">')'</span><span class="o">,</span> <span class="s1">'info'</span><span class="o">,</span> <span class="s1">'Toolbar'</span><span class="o">);</span>
                
                <span class="k">if</span> <span class="o">(</span><span class="nx">after</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">tmp</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">);</span>
                    <span class="k">var</span> <span class="nx">nextSib</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
                    <span class="k">if</span> <span class="o">(</span><span class="nx">after</span><span class="o">.</span><span class="nx">get</span><span class="o">)</span> <span class="o">{</span>
                        <span class="nx">nextSib</span> <span class="o">=</span> <span class="nx">after</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">).</span><span class="nx">nextSibling</span><span class="o">;</span>
                    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="nx">after</span><span class="o">.</span><span class="nx">nextSibling</span><span class="o">)</span> <span class="o">{</span>
                        <span class="nx">nextSib</span> <span class="o">=</span> <span class="nx">after</span><span class="o">.</span><span class="nx">nextSibling</span><span class="o">;</span>
                    <span class="o">}</span>
                    <span class="k">if</span> <span class="o">(</span><span class="nx">nextSib</span><span class="o">)</span> <span class="o">{</span>
                        <span class="nx">nextSib</span><span class="o">.</span><span class="nx">parentNode</span><span class="o">.</span><span class="nx">insertBefore</span><span class="o">(</span><span class="nx">el</span><span class="o">,</span> <span class="nx">nextSib</span><span class="o">);</span>
                    <span class="o">}</span>
                <span class="o">}</span>
                <span class="nx">tmp</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">CLASS_PREFIX</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="nx">tmp</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'value'</span><span class="o">));</span>

                <span class="k">var</span> <span class="nx">icon</span> <span class="o">=</span> <span class="nb">document</span><span class="o">.</span><span class="nx">createElement</span><span class="o">(</span><span class="s1">'span'</span><span class="o">);</span>
                <span class="nx">icon</span><span class="o">.</span><span class="nx">className</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">CLASS_PREFIX</span> <span class="o">+</span> <span class="s1">'-icon'</span><span class="o">;</span>
                <span class="nx">tmp</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">).</span><span class="nx">insertBefore</span><span class="o">(</span><span class="nx">icon</span><span class="o">,</span> <span class="nx">tmp</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'firstChild'</span><span class="o">));</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">tmp</span><span class="o">.</span><span class="nx">_button</span><span class="o">.</span><span class="nx">tagName</span><span class="o">.</span><span class="nx">toLowerCase</span><span class="o">()</span> <span class="o">==</span> <span class="s1">'button'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nx">tmp</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">).</span><span class="nx">setAttribute</span><span class="o">(</span><span class="s1">'unselectable'</span><span class="o">,</span> <span class="s1">'on'</span><span class="o">);</span>
                    <span class="c">//Replace the Button HTML Element with an a href if it exists</span>
<span class="c"></span>                    <span class="k">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nb">document</span><span class="o">.</span><span class="nx">createElement</span><span class="o">(</span><span class="s1">'a'</span><span class="o">);</span>
                    <span class="nx">a</span><span class="o">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">tmp</span><span class="o">.</span><span class="nx">_button</span><span class="o">.</span><span class="nx">innerHTML</span><span class="o">;</span>
                    <span class="nx">a</span><span class="o">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s1">'#'</span><span class="o">;</span>
                    <span class="nx">a</span><span class="o">.</span><span class="nx">tabIndex</span> <span class="o">=</span> <span class="s1">'-1'</span><span class="o">;</span>
                    <span class="nx">Event</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="nx">a</span><span class="o">,</span> <span class="s1">'click'</span><span class="o">,</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
                        <span class="nx">Event</span><span class="o">.</span><span class="nx">stopEvent</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
                    <span class="o">});</span>
                    <span class="nx">tmp</span><span class="o">.</span><span class="nx">_button</span><span class="o">.</span><span class="nx">parentNode</span><span class="o">.</span><span class="nx">replaceChild</span><span class="o">(</span><span class="nx">a</span><span class="o">,</span> <span class="nx">tmp</span><span class="o">.</span><span class="nx">_button</span><span class="o">);</span>
                    <span class="nx">tmp</span><span class="o">.</span><span class="nx">_button</span> <span class="o">=</span> <span class="nx">a</span><span class="o">;</span>
                <span class="o">}</span>

                <span class="k">if</span> <span class="o">(</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">'select'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="nx">tmp</span><span class="o">.</span><span class="nx">_button</span><span class="o">.</span><span class="nx">tagName</span><span class="o">.</span><span class="nx">toLowerCase</span><span class="o">()</span> <span class="o">==</span> <span class="s1">'select'</span><span class="o">)</span> <span class="o">{</span>
                        <span class="nx">icon</span><span class="o">.</span><span class="nx">parentNode</span><span class="o">.</span><span class="nx">removeChild</span><span class="o">(</span><span class="nx">icon</span><span class="o">);</span>
                        <span class="k">var</span> <span class="nx">iel</span> <span class="o">=</span> <span class="nx">tmp</span><span class="o">.</span><span class="nx">_button</span><span class="o">;</span>
                        <span class="k">var</span> <span class="nx">parEl</span> <span class="o">=</span> <span class="nx">tmp</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">);</span>
                        <span class="nx">parEl</span><span class="o">.</span><span class="nx">parentNode</span><span class="o">.</span><span class="nx">replaceChild</span><span class="o">(</span><span class="nx">iel</span><span class="o">,</span> <span class="nx">parEl</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="c">//Don't put a class on it if it's a real select element</span>
<span class="c"></span>                        <span class="nx">tmp</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">CLASS_PREFIX</span> <span class="o">+</span> <span class="s1">'-select'</span><span class="o">);</span>
                    <span class="o">}</span>
                <span class="o">}</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">'spin'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(!</span><span class="nx">Lang</span><span class="o">.</span><span class="nx">isArray</span><span class="o">(</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">range</span><span class="o">))</span> <span class="o">{</span>
                        <span class="nx">oButton</span><span class="o">.</span><span class="nx">range</span> <span class="o">=</span> <span class="o">[</span> <span class="m">10</span><span class="o">,</span> <span class="m">100</span> <span class="o">];</span>
                    <span class="o">}</span>
                    <span class="k">this</span><span class="o">.</span><span class="nx">_makeSpinButton</span><span class="o">(</span><span class="nx">tmp</span><span class="o">,</span> <span class="nx">oButton</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="nx">tmp</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">).</span><span class="nx">setAttribute</span><span class="o">(</span><span class="s1">'title'</span><span class="o">,</span> <span class="nx">tmp</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'label'</span><span class="o">));</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">type</span> <span class="o">!=</span> <span class="s1">'spin'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">((</span><span class="nx">YAHOO</span><span class="o">.</span><span class="nx">widget</span><span class="o">.</span><span class="nx">Overlay</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="nx">_oButton</span><span class="o">.</span><span class="nx">menu</span> <span class="k">instanceof</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">widget</span><span class="o">.</span><span class="nx">Overlay</span><span class="o">))</span> <span class="o">{</span>
                        <span class="k">var</span> <span class="nx">showPicker</span> <span class="o">=</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
                            <span class="k">var</span> <span class="nx">exec</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                            <span class="k">if</span> <span class="o">(</span><span class="nx">ev</span><span class="o">.</span><span class="nx">keyCode</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="nx">ev</span><span class="o">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="m">9</span><span class="o">))</span> <span class="o">{</span>
                                <span class="nx">exec</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
                            <span class="o">}</span>
                            <span class="k">if</span> <span class="o">(</span><span class="nx">exec</span><span class="o">)</span> <span class="o">{</span>
                                <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_colorPicker</span><span class="o">)</span> <span class="o">{</span>
                                    <span class="k">this</span><span class="o">.</span><span class="nx">_colorPicker</span><span class="o">.</span><span class="nx">_button</span> <span class="o">=</span> <span class="nx">oButton</span><span class="o">.</span><span class="nx">value</span><span class="o">;</span>
                                <span class="o">}</span>
                                <span class="k">var</span> <span class="nx">menuEL</span> <span class="o">=</span> <span class="nx">tmp</span><span class="o">.</span><span class="nx">getMenu</span><span class="o">().</span><span class="nx">element</span><span class="o">;</span>
                                <span class="k">if</span> <span class="o">(</span><span class="nx">Dom</span><span class="o">.</span><span class="nx">getStyle</span><span class="o">(</span><span class="nx">menuEL</span><span class="o">,</span> <span class="s1">'visibility'</span><span class="o">)</span> <span class="o">==</span> <span class="s1">'hidden'</span><span class="o">)</span> <span class="o">{</span>
                                    <span class="nx">tmp</span><span class="o">.</span><span class="nx">getMenu</span><span class="o">().</span><span class="nx">show</span><span class="o">();</span>
                                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                                    <span class="nx">tmp</span><span class="o">.</span><span class="nx">getMenu</span><span class="o">().</span><span class="nx">hide</span><span class="o">();</span>
                                <span class="o">}</span>
                            <span class="o">}</span>
                            <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">util</span><span class="o">.</span><span class="nx">Event</span><span class="o">.</span><span class="nx">stopEvent</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
                        <span class="o">};</span>
                        <span class="nx">tmp</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="s1">'mousedown'</span><span class="o">,</span> <span class="nx">showPicker</span><span class="o">,</span> <span class="nx">oButton</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
                        <span class="nx">tmp</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="s1">'keydown'</span><span class="o">,</span> <span class="nx">showPicker</span><span class="o">,</span> <span class="nx">oButton</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
                        
                    <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">((</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">type</span> <span class="o">!=</span> <span class="s1">'menu'</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">type</span> <span class="o">!=</span> <span class="s1">'select'</span><span class="o">))</span> <span class="o">{</span>
                        <span class="nx">tmp</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="s1">'keypress'</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="nx">_buttonClick</span><span class="o">,</span> <span class="nx">oButton</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
                        <span class="nx">tmp</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="s1">'mousedown'</span><span class="o">,</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
                            <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">util</span><span class="o">.</span><span class="nx">Event</span><span class="o">.</span><span class="nx">stopEvent</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">_buttonClick</span><span class="o">(</span><span class="nx">ev</span><span class="o">,</span> <span class="nx">oButton</span><span class="o">);</span>
                        <span class="o">},</span> <span class="nx">oButton</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
                        <span class="nx">tmp</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="s1">'click'</span><span class="o">,</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
                            <span class="c">//YAHOO.util.Event.stopEvent(ev);</span>
<span class="c"></span>                        <span class="o">});</span>
                    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="c">//Stop the mousedown event so we can trap the selection in the editor!</span>
<span class="c"></span>                        <span class="nx">tmp</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="s1">'mousedown'</span><span class="o">,</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
                            <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">util</span><span class="o">.</span><span class="nx">Event</span><span class="o">.</span><span class="nx">stopEvent</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
                        <span class="o">});</span>
                        <span class="nx">tmp</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="s1">'click'</span><span class="o">,</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
                            <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">util</span><span class="o">.</span><span class="nx">Event</span><span class="o">.</span><span class="nx">stopEvent</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
                        <span class="o">});</span>
                        <span class="nx">tmp</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="s1">'change'</span><span class="o">,</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
                            <span class="k">if</span> <span class="o">(!</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">menucmd</span><span class="o">)</span> <span class="o">{</span>
                                <span class="nx">oButton</span><span class="o">.</span><span class="nx">menucmd</span> <span class="o">=</span> <span class="nx">oButton</span><span class="o">.</span><span class="nx">value</span><span class="o">;</span>
                            <span class="o">}</span>
                            <span class="nx">oButton</span><span class="o">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">ev</span><span class="o">.</span><span class="nx">value</span><span class="o">;</span>
                            <span class="k">this</span><span class="o">.</span><span class="nx">_buttonClick</span><span class="o">(</span><span class="nx">ev</span><span class="o">,</span> <span class="nx">oButton</span><span class="o">);</span>
                        <span class="o">},</span> <span class="k">this</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>

                        <span class="k">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
                        <span class="c">//Hijack the mousedown event in the menu and make it fire a button click..</span>
<span class="c"></span>                        <span class="k">if</span> <span class="o">(</span><span class="nx">tmp</span><span class="o">.</span><span class="nx">getMenu</span><span class="o">().</span><span class="nx">mouseDownEvent</span><span class="o">)</span> <span class="o">{</span>
                            <span class="nx">tmp</span><span class="o">.</span><span class="nx">getMenu</span><span class="o">().</span><span class="nx">mouseDownEvent</span><span class="o">.</span><span class="nx">subscribe</span><span class="o">(</span><span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">,</span> <span class="nx">args</span><span class="o">)</span> <span class="o">{</span>
                                <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">log</span><span class="o">(</span><span class="s1">'mouseDownEvent'</span><span class="o">,</span> <span class="s1">'warn'</span><span class="o">,</span> <span class="s1">'Toolbar'</span><span class="o">);</span>
                                <span class="k">var</span> <span class="nx">oMenu</span> <span class="o">=</span> <span class="nx">args</span><span class="o">[</span><span class="m">1</span><span class="o">];</span>
                                <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">util</span><span class="o">.</span><span class="nx">Event</span><span class="o">.</span><span class="nx">stopEvent</span><span class="o">(</span><span class="nx">args</span><span class="o">[</span><span class="m">0</span><span class="o">]);</span>
                                <span class="nx">tmp</span><span class="o">.</span><span class="nx">_onMenuClick</span><span class="o">(</span><span class="nx">args</span><span class="o">[</span><span class="m">0</span><span class="o">],</span> <span class="nx">tmp</span><span class="o">);</span>
                                <span class="k">if</span> <span class="o">(!</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">menucmd</span><span class="o">)</span> <span class="o">{</span>
                                    <span class="nx">oButton</span><span class="o">.</span><span class="nx">menucmd</span> <span class="o">=</span> <span class="nx">oButton</span><span class="o">.</span><span class="nx">value</span><span class="o">;</span>
                                <span class="o">}</span>
                                <span class="nx">oButton</span><span class="o">.</span><span class="nx">value</span> <span class="o">=</span> <span class="o">((</span><span class="nx">oMenu</span><span class="o">.</span><span class="nx">value</span><span class="o">)</span> <span class="o">?</span> <span class="nx">oMenu</span><span class="o">.</span><span class="nx">value</span> <span class="o">:</span> <span class="nx">oMenu</span><span class="o">.</span><span class="nx">_oText</span><span class="o">.</span><span class="nx">nodeValue</span><span class="o">);</span>
                                <span class="nx">self</span><span class="o">.</span><span class="nx">_buttonClick</span><span class="o">.</span><span class="nx">call</span><span class="o">(</span><span class="nx">self</span><span class="o">,</span> <span class="nx">args</span><span class="o">[</span><span class="m">1</span><span class="o">],</span> <span class="nx">oButton</span><span class="o">);</span>
                                <span class="nx">tmp</span><span class="o">.</span><span class="nx">_hideMenu</span><span class="o">();</span>
                                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
                            <span class="o">});</span>
                            <span class="nx">tmp</span><span class="o">.</span><span class="nx">getMenu</span><span class="o">().</span><span class="nx">clickEvent</span><span class="o">.</span><span class="nx">subscribe</span><span class="o">(</span><span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">,</span> <span class="nx">args</span><span class="o">)</span> <span class="o">{</span>
                                <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">log</span><span class="o">(</span><span class="s1">'clickEvent'</span><span class="o">,</span> <span class="s1">'warn'</span><span class="o">,</span> <span class="s1">'Toolbar'</span><span class="o">);</span>
                                <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">util</span><span class="o">.</span><span class="nx">Event</span><span class="o">.</span><span class="nx">stopEvent</span><span class="o">(</span><span class="nx">args</span><span class="o">[</span><span class="m">0</span><span class="o">]);</span>
                            <span class="o">});</span>
                            <span class="nx">tmp</span><span class="o">.</span><span class="nx">getMenu</span><span class="o">().</span><span class="nx">mouseUpEvent</span><span class="o">.</span><span class="nx">subscribe</span><span class="o">(</span><span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">,</span> <span class="nx">args</span><span class="o">)</span> <span class="o">{</span>
                                <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">log</span><span class="o">(</span><span class="s1">'mouseUpEvent'</span><span class="o">,</span> <span class="s1">'warn'</span><span class="o">,</span> <span class="s1">'Toolbar'</span><span class="o">);</span>
                                <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">util</span><span class="o">.</span><span class="nx">Event</span><span class="o">.</span><span class="nx">stopEvent</span><span class="o">(</span><span class="nx">args</span><span class="o">[</span><span class="m">0</span><span class="o">]);</span>
                            <span class="o">});</span>
                        <span class="o">}</span>
                        
                    <span class="o">}</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="c">//Stop the mousedown event so we can trap the selection in the editor!</span>
<span class="c"></span>                    <span class="nx">tmp</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="s1">'mousedown'</span><span class="o">,</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
                        <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">util</span><span class="o">.</span><span class="nx">Event</span><span class="o">.</span><span class="nx">stopEvent</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
                    <span class="o">});</span>
                    <span class="nx">tmp</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="s1">'click'</span><span class="o">,</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
                        <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">util</span><span class="o">.</span><span class="nx">Event</span><span class="o">.</span><span class="nx">stopEvent</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
                    <span class="o">});</span>
                <span class="o">}</span>
                <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">browser</span><span class="o">.</span><span class="nx">ie</span><span class="o">)</span> <span class="o">{</span>
                    <span class="c">/*</span>
<span class="c">                    //Add a couple of new events for IE</span>
<span class="c">                    tmp.DOM_EVENTS.focusin = true;</span>
<span class="c">                    tmp.DOM_EVENTS.focusout = true;</span>
<span class="c">                    </span>
<span class="c">                    //Stop them so we don't loose focus in the Editor</span>
<span class="c">                    tmp.on('focusin', function(ev) {</span>
<span class="c">                        YAHOO.util.Event.stopEvent(ev);</span>
<span class="c">                    }, oButton, this);</span>
<span class="c">                    </span>
<span class="c">                    tmp.on('focusout', function(ev) {</span>
<span class="c">                        YAHOO.util.Event.stopEvent(ev);</span>
<span class="c">                    }, oButton, this);</span>
<span class="c">                    tmp.on('click', function(ev) {</span>
<span class="c">                        YAHOO.util.Event.stopEvent(ev);</span>
<span class="c">                    }, oButton, this);</span>
<span class="c">                    */</span>
                <span class="o">}</span>
                <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">browser</span><span class="o">.</span><span class="nx">webkit</span><span class="o">)</span> <span class="o">{</span>
                    <span class="c">//This will keep the document from gaining focus and the editor from loosing it..</span>
<span class="c"></span>                    <span class="c">//Forcefully remove the focus calls in button!</span>
<span class="c"></span>                    <span class="nx">tmp</span><span class="o">.</span><span class="nx">hasFocus</span> <span class="o">=</span> <span class="k">function</span><span class="o">()</span> <span class="o">{</span>
                        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
                    <span class="o">};</span>
                <span class="o">}</span>
                <span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">[</span><span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">.</span><span class="nx">length</span><span class="o">]</span> <span class="o">=</span> <span class="nx">tmp</span><span class="o">;</span>
                <span class="k">if</span> <span class="o">((</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">'menu'</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">'split'</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">'select'</span><span class="o">))</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="nx">Lang</span><span class="o">.</span><span class="nx">isArray</span><span class="o">(</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">menu</span><span class="o">))</span> <span class="o">{</span>
                        <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">log</span><span class="o">(</span><span class="s1">'Button type is ('</span> <span class="o">+</span> <span class="nx">oButton</span><span class="o">.</span><span class="nx">type</span> <span class="o">+</span> <span class="s1">'), doing extra renderer work.'</span><span class="o">,</span> <span class="s1">'info'</span><span class="o">,</span> <span class="s1">'Toolbar'</span><span class="o">);</span>
                        <span class="k">var</span> <span class="nx">menu</span> <span class="o">=</span> <span class="nx">tmp</span><span class="o">.</span><span class="nx">getMenu</span><span class="o">();</span>
                        <span class="k">if</span> <span class="o">(</span><span class="nx">menu</span><span class="o">.</span><span class="nx">renderEvent</span><span class="o">)</span> <span class="o">{</span>
                            <span class="nx">menu</span><span class="o">.</span><span class="nx">renderEvent</span><span class="o">.</span><span class="nx">subscribe</span><span class="o">(</span><span class="nx">_addMenuClasses</span><span class="o">,</span> <span class="nx">tmp</span><span class="o">);</span>
                            <span class="k">if</span> <span class="o">(</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">renderer</span><span class="o">)</span> <span class="o">{</span>
                                <span class="nx">menu</span><span class="o">.</span><span class="nx">renderEvent</span><span class="o">.</span><span class="nx">subscribe</span><span class="o">(</span><span class="nx">oButton</span><span class="o">.</span><span class="nx">renderer</span><span class="o">,</span> <span class="nx">tmp</span><span class="o">);</span>
                            <span class="o">}</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="nx">oButton</span><span class="o">;</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method addSeparator</span>
<span class="c">        * @description Add a new button separator to the toolbar.</span>
<span class="c">        * @param {HTMLElement} cont Optional HTML element to insert this button into.</span>
<span class="c">        * @param {HTMLElement} after Optional HTML element to insert this button after in the DOM.</span>
<span class="c">        */</span>
        <span class="nx">addSeparator</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">cont</span><span class="o">,</span> <span class="nx">after</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="nx">_queue</span><span class="o">[</span><span class="k">this</span><span class="o">.</span><span class="nx">_queue</span><span class="o">.</span><span class="nx">length</span><span class="o">]</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'addSeparator'</span><span class="o">,</span> <span class="nx">arguments</span><span class="o">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">var</span> <span class="nx">sepCont</span> <span class="o">=</span> <span class="o">((</span><span class="nx">cont</span><span class="o">)</span> <span class="o">?</span> <span class="nx">cont</span> <span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'cont'</span><span class="o">));</span>
            <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="nx">_queue</span><span class="o">[</span><span class="k">this</span><span class="o">.</span><span class="nx">_queue</span><span class="o">.</span><span class="nx">length</span><span class="o">]</span> <span class="o">=</span> <span class="o">[</span><span class="s1">'addSeparator'</span><span class="o">,</span> <span class="nx">arguments</span><span class="o">];</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_sepCount</span> <span class="o">===</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="nx">_sepCount</span> <span class="o">=</span> <span class="m">0</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="nx">_sep</span><span class="o">)</span> <span class="o">{</span>
                <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">log</span><span class="o">(</span><span class="s1">'Separator does not yet exist, creating'</span><span class="o">,</span> <span class="s1">'info'</span><span class="o">,</span> <span class="s1">'Toolbar'</span><span class="o">);</span>
                <span class="k">this</span><span class="o">.</span><span class="nx">_sep</span> <span class="o">=</span> <span class="nb">document</span><span class="o">.</span><span class="nx">createElement</span><span class="o">(</span><span class="s1">'SPAN'</span><span class="o">);</span>
                <span class="nx">Dom</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_sep</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="nx">CLASS_SEPARATOR</span><span class="o">);</span>
                <span class="k">this</span><span class="o">.</span><span class="nx">_sep</span><span class="o">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">'|'</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">log</span><span class="o">(</span><span class="s1">'Separator does exist, cloning'</span><span class="o">,</span> <span class="s1">'info'</span><span class="o">,</span> <span class="s1">'Toolbar'</span><span class="o">);</span>
            <span class="k">var</span> <span class="nx">_sep</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">_sep</span><span class="o">.</span><span class="nx">cloneNode</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
            <span class="k">this</span><span class="o">.</span><span class="nx">_sepCount</span><span class="o">++;</span>
            <span class="nx">Dom</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="nx">_sep</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="nx">CLASS_SEPARATOR</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="nx">_sepCount</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="nx">after</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">var</span> <span class="nx">nextSib</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">after</span><span class="o">.</span><span class="nx">get</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nx">nextSib</span> <span class="o">=</span> <span class="nx">after</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">).</span><span class="nx">nextSibling</span><span class="o">;</span>
                <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="nx">after</span><span class="o">.</span><span class="nx">nextSibling</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nx">nextSib</span> <span class="o">=</span> <span class="nx">after</span><span class="o">.</span><span class="nx">nextSibling</span><span class="o">;</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="nx">nextSib</span> <span class="o">=</span> <span class="nx">after</span><span class="o">;</span>
                <span class="o">}</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">nextSib</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="nx">nextSib</span> <span class="o">==</span> <span class="nx">after</span><span class="o">)</span> <span class="o">{</span>
                        <span class="nx">nextSib</span><span class="o">.</span><span class="nx">parentNode</span><span class="o">.</span><span class="nx">appendChild</span><span class="o">(</span><span class="nx">_sep</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="nx">nextSib</span><span class="o">.</span><span class="nx">parentNode</span><span class="o">.</span><span class="nx">insertBefore</span><span class="o">(</span><span class="nx">_sep</span><span class="o">,</span> <span class="nx">nextSib</span><span class="o">);</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="nx">sepCont</span><span class="o">.</span><span class="nx">appendChild</span><span class="o">(</span><span class="nx">_sep</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="nx">_sep</span><span class="o">;</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method _createColorPicker</span>
<span class="c">        * @private</span>
<span class="c">        * @description Creates the core DOM reference to the color picker menu item.</span>
<span class="c">        * @param {String} id the id of the toolbar to prefix this DOM container with.</span>
<span class="c">        */</span>
        <span class="nx">_createColorPicker</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">id</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="nx">Dom</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="nx">id</span> <span class="o">+</span> <span class="s1">'_colors'</span><span class="o">))</span> <span class="o">{</span>
               <span class="nx">Dom</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="nx">id</span> <span class="o">+</span> <span class="s1">'_colors'</span><span class="o">).</span><span class="nx">parentNode</span><span class="o">.</span><span class="nx">removeChild</span><span class="o">(</span><span class="nx">Dom</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="nx">id</span> <span class="o">+</span> <span class="s1">'_colors'</span><span class="o">));</span>
            <span class="o">}</span>
            <span class="k">var</span> <span class="nx">picker</span> <span class="o">=</span> <span class="nb">document</span><span class="o">.</span><span class="nx">createElement</span><span class="o">(</span><span class="s1">'div'</span><span class="o">);</span>
            <span class="nx">picker</span><span class="o">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">'yui-toolbar-colors'</span><span class="o">;</span>
            <span class="nx">picker</span><span class="o">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">id</span> <span class="o">+</span> <span class="s1">'_colors'</span><span class="o">;</span>
            <span class="nx">picker</span><span class="o">.</span><span class="nx">style</span><span class="o">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">'none'</span><span class="o">;</span>
            <span class="nx">Event</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="nb">window</span><span class="o">,</span> <span class="s1">'load'</span><span class="o">,</span> <span class="k">function</span><span class="o">()</span> <span class="o">{</span>
                <span class="nb">document</span><span class="o">.</span><span class="nx">body</span><span class="o">.</span><span class="nx">appendChild</span><span class="o">(</span><span class="nx">picker</span><span class="o">);</span>
            <span class="o">},</span> <span class="k">this</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>

            <span class="k">this</span><span class="o">.</span><span class="nx">_colorPicker</span> <span class="o">=</span> <span class="nx">picker</span><span class="o">;</span>

            <span class="k">var</span> <span class="nx">html</span> <span class="o">=</span> <span class="s1">''</span><span class="o">;</span>
            <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">i</span> <span class="k">in</span> <span class="k">this</span><span class="o">.</span><span class="nx">_colorData</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">Lang</span><span class="o">.</span><span class="nx">hasOwnProperty</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_colorData</span><span class="o">,</span> <span class="nx">i</span><span class="o">))</span> <span class="o">{</span>
                    <span class="nx">html</span> <span class="o">+=</span> <span class="s1">'&lt;a style="background-color: '</span> <span class="o">+</span> <span class="nx">i</span> <span class="o">+</span> <span class="s1">'" href="#"&gt;'</span> <span class="o">+</span> <span class="nx">i</span><span class="o">.</span><span class="nx">replace</span><span class="o">(</span><span class="s1">'#'</span><span class="o">,</span> <span class="s1">''</span><span class="o">)</span> <span class="o">+</span> <span class="s1">'&lt;/a&gt;'</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="nx">html</span> <span class="o">+=</span> <span class="s1">'&lt;span&gt;&lt;em&gt;X&lt;/em&gt;&lt;strong&gt;&lt;/strong&gt;&lt;/span&gt;'</span><span class="o">;</span>
            <span class="nb">window</span><span class="o">.</span><span class="nx">setTimeout</span><span class="o">(</span><span class="k">function</span><span class="o">()</span> <span class="o">{</span>
                <span class="nx">picker</span><span class="o">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">html</span><span class="o">;</span>
            <span class="o">},</span> <span class="m">0</span><span class="o">);</span>

            <span class="nx">Event</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="nx">picker</span><span class="o">,</span> <span class="s1">'mouseover'</span><span class="o">,</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">var</span> <span class="nx">picker</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">_colorPicker</span><span class="o">;</span>
                <span class="k">var</span> <span class="nx">em</span> <span class="o">=</span> <span class="nx">picker</span><span class="o">.</span><span class="nx">getElementsByTagName</span><span class="o">(</span><span class="s1">'em'</span><span class="o">)[</span><span class="m">0</span><span class="o">];</span>
                <span class="k">var</span> <span class="nx">strong</span> <span class="o">=</span> <span class="nx">picker</span><span class="o">.</span><span class="nx">getElementsByTagName</span><span class="o">(</span><span class="s1">'strong'</span><span class="o">)[</span><span class="m">0</span><span class="o">];</span>
                <span class="k">var</span> <span class="nx">tar</span> <span class="o">=</span> <span class="nx">Event</span><span class="o">.</span><span class="nx">getTarget</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">tar</span><span class="o">.</span><span class="nx">tagName</span><span class="o">.</span><span class="nx">toLowerCase</span><span class="o">()</span> <span class="o">==</span> <span class="s1">'a'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nx">em</span><span class="o">.</span><span class="nx">style</span><span class="o">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="nx">tar</span><span class="o">.</span><span class="nx">style</span><span class="o">.</span><span class="nx">backgroundColor</span><span class="o">;</span>
                    <span class="nx">strong</span><span class="o">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">_colorData</span><span class="o">[</span><span class="s1">'#'</span> <span class="o">+</span> <span class="nx">tar</span><span class="o">.</span><span class="nx">innerHTML</span><span class="o">]</span> <span class="o">+</span> <span class="s1">'&lt;br&gt;'</span> <span class="o">+</span> <span class="nx">tar</span><span class="o">.</span><span class="nx">innerHTML</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">},</span> <span class="k">this</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
            <span class="nx">Event</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="nx">picker</span><span class="o">,</span> <span class="s1">'focus'</span><span class="o">,</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
                <span class="nx">Event</span><span class="o">.</span><span class="nx">stopEvent</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
            <span class="o">});</span>
            <span class="nx">Event</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="nx">picker</span><span class="o">,</span> <span class="s1">'click'</span><span class="o">,</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
                <span class="nx">Event</span><span class="o">.</span><span class="nx">stopEvent</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
            <span class="o">});</span>
            <span class="nx">Event</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="nx">picker</span><span class="o">,</span> <span class="s1">'mousedown'</span><span class="o">,</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
                <span class="nx">Event</span><span class="o">.</span><span class="nx">stopEvent</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
                <span class="k">var</span> <span class="nx">tar</span> <span class="o">=</span> <span class="nx">Event</span><span class="o">.</span><span class="nx">getTarget</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">tar</span><span class="o">.</span><span class="nx">tagName</span><span class="o">.</span><span class="nx">toLowerCase</span><span class="o">()</span> <span class="o">==</span> <span class="s1">'a'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">var</span> <span class="nx">retVal</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">fireEvent</span><span class="o">(</span><span class="s1">'colorPickerClicked'</span><span class="o">,</span> <span class="o">{</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">'colorPickerClicked'</span><span class="o">,</span> <span class="nx">target</span><span class="o">:</span> <span class="k">this</span><span class="o">,</span> <span class="nx">button</span><span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="nx">_colorPicker</span><span class="o">.</span><span class="nx">_button</span><span class="o">,</span> <span class="nx">color</span><span class="o">:</span> <span class="nx">tar</span><span class="o">.</span><span class="nx">innerHTML</span><span class="o">,</span> <span class="nx">colorName</span><span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="nx">_colorData</span><span class="o">[</span><span class="s1">'#'</span> <span class="o">+</span> <span class="nx">tar</span><span class="o">.</span><span class="nx">innerHTML</span><span class="o">]</span> <span class="o">}</span> <span class="o">);</span>
                    <span class="k">if</span> <span class="o">(</span><span class="nx">retVal</span> <span class="o">!==</span> <span class="kc">false</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">var</span> <span class="nx">info</span> <span class="o">=</span> <span class="o">{</span>
                            <span class="nx">color</span><span class="o">:</span> <span class="nx">tar</span><span class="o">.</span><span class="nx">innerHTML</span><span class="o">,</span>
                            <span class="nx">colorName</span><span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="nx">_colorData</span><span class="o">[</span><span class="s1">'#'</span> <span class="o">+</span> <span class="nx">tar</span><span class="o">.</span><span class="nx">innerHTML</span><span class="o">],</span>
                            <span class="nx">value</span><span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="nx">_colorPicker</span><span class="o">.</span><span class="nx">_button</span> 
                        <span class="o">};</span>
                    
                        <span class="k">this</span><span class="o">.</span><span class="nx">fireEvent</span><span class="o">(</span><span class="s1">'buttonClick'</span><span class="o">,</span> <span class="o">{</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">'buttonClick'</span><span class="o">,</span> <span class="nx">target</span><span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">),</span> <span class="nx">button</span><span class="o">:</span> <span class="nx">info</span> <span class="o">});</span>
                    <span class="o">}</span>
                    <span class="k">this</span><span class="o">.</span><span class="nx">getButtonByValue</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_colorPicker</span><span class="o">.</span><span class="nx">_button</span><span class="o">).</span><span class="nx">getMenu</span><span class="o">().</span><span class="nx">hide</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">},</span> <span class="k">this</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method _resetColorPicker</span>
<span class="c">        * @private</span>
<span class="c">        * @description Clears the currently selected color or mouseover color in the color picker.</span>
<span class="c">        */</span>
        <span class="nx">_resetColorPicker</span><span class="o">:</span> <span class="k">function</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">var</span> <span class="nx">em</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">_colorPicker</span><span class="o">.</span><span class="nx">getElementsByTagName</span><span class="o">(</span><span class="s1">'em'</span><span class="o">)[</span><span class="m">0</span><span class="o">];</span>
            <span class="k">var</span> <span class="nx">strong</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">_colorPicker</span><span class="o">.</span><span class="nx">getElementsByTagName</span><span class="o">(</span><span class="s1">'strong'</span><span class="o">)[</span><span class="m">0</span><span class="o">];</span>
            <span class="nx">em</span><span class="o">.</span><span class="nx">style</span><span class="o">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="s1">'transparent'</span><span class="o">;</span>
            <span class="nx">strong</span><span class="o">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">''</span><span class="o">;</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method _makeColorButton</span>
<span class="c">        * @private</span>
<span class="c">        * @description Called to turn a "color" button into a menu button with an Overlay for the menu.</span>
<span class="c">        * @param {Object} _oButton &lt;a href="YAHOO.widget.ToolbarButton.html"&gt;YAHOO.widget.ToolbarButton&lt;/a&gt; reference</span>
<span class="c">        */</span>
        <span class="nx">_makeColorButton</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">_oButton</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="nx">_colorPicker</span><span class="o">)</span> <span class="o">{</span>   
                <span class="k">this</span><span class="o">.</span><span class="nx">_createColorPicker</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'id'</span><span class="o">));</span>
            <span class="o">}</span>
            <span class="nx">_oButton</span><span class="o">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s1">'color'</span><span class="o">;</span>
            <span class="nx">_oButton</span><span class="o">.</span><span class="nx">menu</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">widget</span><span class="o">.</span><span class="nx">Overlay</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'id'</span><span class="o">)</span> <span class="o">+</span> <span class="s1">'_'</span> <span class="o">+</span> <span class="nx">_oButton</span><span class="o">.</span><span class="nx">value</span> <span class="o">+</span> <span class="s1">'_menu'</span><span class="o">,</span> <span class="o">{</span> <span class="nx">visible</span><span class="o">:</span> <span class="kc">false</span><span class="o">,</span> <span class="nx">position</span><span class="o">:</span> <span class="s1">'absolute'</span><span class="o">,</span> <span class="nx">iframe</span><span class="o">:</span> <span class="kc">true</span> <span class="o">});</span>
            <span class="nx">_oButton</span><span class="o">.</span><span class="nx">menu</span><span class="o">.</span><span class="nx">setBody</span><span class="o">(</span><span class="s1">''</span><span class="o">);</span>
            <span class="nx">_oButton</span><span class="o">.</span><span class="nx">menu</span><span class="o">.</span><span class="nx">render</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'cont'</span><span class="o">));</span>
            <span class="nx">Dom</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="nx">_oButton</span><span class="o">.</span><span class="nx">menu</span><span class="o">.</span><span class="nx">element</span><span class="o">,</span> <span class="s1">'yui-button-menu'</span><span class="o">);</span>
            <span class="nx">Dom</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="nx">_oButton</span><span class="o">.</span><span class="nx">menu</span><span class="o">.</span><span class="nx">element</span><span class="o">,</span> <span class="s1">'yui-color-button-menu'</span><span class="o">);</span>
            <span class="nx">_oButton</span><span class="o">.</span><span class="nx">menu</span><span class="o">.</span><span class="nx">beforeShowEvent</span><span class="o">.</span><span class="nx">subscribe</span><span class="o">(</span><span class="k">function</span><span class="o">()</span> <span class="o">{</span>
                <span class="nx">_oButton</span><span class="o">.</span><span class="nx">menu</span><span class="o">.</span><span class="nx">cfg</span><span class="o">.</span><span class="nx">setProperty</span><span class="o">(</span><span class="s1">'zindex'</span><span class="o">,</span> <span class="m">5</span><span class="o">);</span> <span class="c">//Re Adjust the overlays zIndex.. not sure why.</span>
<span class="c"></span>                <span class="nx">_oButton</span><span class="o">.</span><span class="nx">menu</span><span class="o">.</span><span class="nx">cfg</span><span class="o">.</span><span class="nx">setProperty</span><span class="o">(</span><span class="s1">'context'</span><span class="o">,</span> <span class="o">[</span><span class="k">this</span><span class="o">.</span><span class="nx">getButtonById</span><span class="o">(</span><span class="nx">_oButton</span><span class="o">.</span><span class="nx">id</span><span class="o">).</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">),</span> <span class="s1">'tl'</span><span class="o">,</span> <span class="s1">'bl'</span><span class="o">]);</span> <span class="c">//Re Adjust the overlay.. not sure why.</span>
<span class="c"></span>                <span class="c">//Move the DOM reference of the color picker to the Overlay that we are about to show.</span>
<span class="c"></span>                <span class="k">this</span><span class="o">.</span><span class="nx">_resetColorPicker</span><span class="o">();</span>
                <span class="k">var</span> <span class="nx">_p</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">_colorPicker</span><span class="o">;</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">_p</span><span class="o">.</span><span class="nx">parentNode</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nx">_p</span><span class="o">.</span><span class="nx">parentNode</span><span class="o">.</span><span class="nx">removeChild</span><span class="o">(</span><span class="nx">_p</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="nx">_oButton</span><span class="o">.</span><span class="nx">menu</span><span class="o">.</span><span class="nx">setBody</span><span class="o">(</span><span class="s1">''</span><span class="o">);</span>
                <span class="nx">_oButton</span><span class="o">.</span><span class="nx">menu</span><span class="o">.</span><span class="nx">appendToBody</span><span class="o">(</span><span class="nx">_p</span><span class="o">);</span>
                <span class="k">this</span><span class="o">.</span><span class="nx">_colorPicker</span><span class="o">.</span><span class="nx">style</span><span class="o">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">'block'</span><span class="o">;</span>
            <span class="o">},</span> <span class="k">this</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
            <span class="k">return</span> <span class="nx">_oButton</span><span class="o">;</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @private</span>
<span class="c">        * @method _makeSpinButton</span>
<span class="c">        * @description Create a button similar to an OS Spin button.. It has an up/down arrow combo to scroll through a range of int values.</span>
<span class="c">        * @param {Object} _button &lt;a href="YAHOO.widget.ToolbarButton.html"&gt;YAHOO.widget.ToolbarButton&lt;/a&gt; reference</span>
<span class="c">        * @param {Object} oButton Object literal containing the buttons initial config</span>
<span class="c">        */</span>
        <span class="nx">_makeSpinButton</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">_button</span><span class="o">,</span> <span class="nx">oButton</span><span class="o">)</span> <span class="o">{</span>
            <span class="nx">_button</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">CLASS_PREFIX</span> <span class="o">+</span> <span class="s1">'-spinbutton'</span><span class="o">);</span>
            <span class="k">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="o">,</span>
                <span class="nx">_par</span> <span class="o">=</span> <span class="nx">_button</span><span class="o">.</span><span class="nx">_button</span><span class="o">.</span><span class="nx">parentNode</span><span class="o">.</span><span class="nx">parentNode</span><span class="o">,</span> <span class="c">//parentNode of Button Element for appending child</span>
<span class="c"></span>                <span class="nx">range</span> <span class="o">=</span> <span class="nx">oButton</span><span class="o">.</span><span class="nx">range</span><span class="o">,</span>
                <span class="nx">_b1</span> <span class="o">=</span> <span class="nb">document</span><span class="o">.</span><span class="nx">createElement</span><span class="o">(</span><span class="s1">'a'</span><span class="o">),</span>
                <span class="nx">_b2</span> <span class="o">=</span> <span class="nb">document</span><span class="o">.</span><span class="nx">createElement</span><span class="o">(</span><span class="s1">'a'</span><span class="o">);</span>
                <span class="nx">_b1</span><span class="o">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s1">'#'</span><span class="o">;</span>
                <span class="nx">_b2</span><span class="o">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s1">'#'</span><span class="o">;</span>
                <span class="nx">_b1</span><span class="o">.</span><span class="nx">tabIndex</span> <span class="o">=</span> <span class="s1">'-1'</span><span class="o">;</span>
                <span class="nx">_b2</span><span class="o">.</span><span class="nx">tabIndex</span> <span class="o">=</span> <span class="s1">'-1'</span><span class="o">;</span>
            
            <span class="c">//Setup the up and down arrows</span>
<span class="c"></span>            <span class="nx">_b1</span><span class="o">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">'up'</span><span class="o">;</span>
            <span class="nx">_b1</span><span class="o">.</span><span class="nx">title</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">STR_SPIN_UP</span><span class="o">;</span>
            <span class="nx">_b1</span><span class="o">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">STR_SPIN_UP</span><span class="o">;</span>
            <span class="nx">_b2</span><span class="o">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">'down'</span><span class="o">;</span>
            <span class="nx">_b2</span><span class="o">.</span><span class="nx">title</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">STR_SPIN_DOWN</span><span class="o">;</span>
            <span class="nx">_b2</span><span class="o">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">STR_SPIN_DOWN</span><span class="o">;</span>

            <span class="c">//Append them to the container</span>
<span class="c"></span>            <span class="nx">_par</span><span class="o">.</span><span class="nx">appendChild</span><span class="o">(</span><span class="nx">_b1</span><span class="o">);</span>
            <span class="nx">_par</span><span class="o">.</span><span class="nx">appendChild</span><span class="o">(</span><span class="nx">_b2</span><span class="o">);</span>
            
            <span class="k">var</span> <span class="k">label</span> <span class="o">=</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">lang</span><span class="o">.</span><span class="nx">substitute</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">STR_SPIN_LABEL</span><span class="o">,</span> <span class="o">{</span> <span class="nx">VALUE</span><span class="o">:</span> <span class="nx">_button</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'label'</span><span class="o">)</span> <span class="o">});</span>
            <span class="nx">_button</span><span class="o">.</span><span class="nx">set</span><span class="o">(</span><span class="s1">'title'</span><span class="o">,</span> <span class="k">label</span><span class="o">);</span>

            <span class="k">var</span> <span class="nx">cleanVal</span> <span class="o">=</span> <span class="k">function</span><span class="o">(</span><span class="nx">value</span><span class="o">)</span> <span class="o">{</span>
                <span class="nx">value</span> <span class="o">=</span> <span class="o">((</span><span class="nx">value</span> <span class="o">&lt;</span> <span class="nx">range</span><span class="o">[</span><span class="m">0</span><span class="o">])</span> <span class="o">?</span> <span class="nx">range</span><span class="o">[</span><span class="m">0</span><span class="o">]</span> <span class="o">:</span> <span class="nx">value</span><span class="o">);</span>
                <span class="nx">value</span> <span class="o">=</span> <span class="o">((</span><span class="nx">value</span> <span class="o">&gt;</span> <span class="nx">range</span><span class="o">[</span><span class="m">1</span><span class="o">])</span> <span class="o">?</span> <span class="nx">range</span><span class="o">[</span><span class="m">1</span><span class="o">]</span> <span class="o">:</span> <span class="nx">value</span><span class="o">);</span>
                <span class="k">return</span> <span class="nx">value</span><span class="o">;</span>
            <span class="o">};</span>

            <span class="k">var</span> <span class="nx">br</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">browser</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">tbar</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
            <span class="k">var</span> <span class="nx">strLabel</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">STR_SPIN_LABEL</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">.</span><span class="nx">firstChild</span><span class="o">)</span> <span class="o">{</span>
                <span class="nx">tbar</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">.</span><span class="nx">firstChild</span><span class="o">;</span>
            <span class="o">}</span>
            
            <span class="k">var</span> <span class="nx">_intUp</span> <span class="o">=</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
                <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">util</span><span class="o">.</span><span class="nx">Event</span><span class="o">.</span><span class="nx">stopEvent</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(!</span><span class="nx">_button</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'disabled'</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="nx">ev</span><span class="o">.</span><span class="nx">keyCode</span> <span class="o">!=</span> <span class="m">9</span><span class="o">))</span> <span class="o">{</span>
                    <span class="k">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="o">(</span><span class="nx">_button</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'label'</span><span class="o">),</span> <span class="m">10</span><span class="o">);</span>
                    <span class="nx">value</span><span class="o">++;</span>
                    <span class="nx">value</span> <span class="o">=</span> <span class="nx">cleanVal</span><span class="o">(</span><span class="nx">value</span><span class="o">);</span>
                    <span class="nx">_button</span><span class="o">.</span><span class="nx">set</span><span class="o">(</span><span class="s1">'label'</span><span class="o">,</span> <span class="s1">''</span><span class="o">+</span><span class="nx">value</span><span class="o">);</span>
                    <span class="k">var</span> <span class="k">label</span> <span class="o">=</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">lang</span><span class="o">.</span><span class="nx">substitute</span><span class="o">(</span><span class="nx">strLabel</span><span class="o">,</span> <span class="o">{</span> <span class="nx">VALUE</span><span class="o">:</span> <span class="nx">_button</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'label'</span><span class="o">)</span> <span class="o">});</span>
                    <span class="nx">_button</span><span class="o">.</span><span class="nx">set</span><span class="o">(</span><span class="s1">'title'</span><span class="o">,</span> <span class="k">label</span><span class="o">);</span>
                    <span class="k">if</span> <span class="o">(!</span><span class="nx">br</span><span class="o">.</span><span class="nx">webkit</span> <span class="o">&amp;&amp;</span> <span class="nx">tbar</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c">//tbar.focus(); //We do this for accessibility, on the re-focus of the element, a screen reader will re-read the title that was just changed</span>
<span class="c"></span>                        <span class="c">//_button.focus();</span>
<span class="c"></span>                    <span class="o">}</span>
                    <span class="nx">self</span><span class="o">.</span><span class="nx">_buttonClick</span><span class="o">(</span><span class="nx">ev</span><span class="o">,</span> <span class="nx">oButton</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">};</span>

            <span class="k">var</span> <span class="nx">_intDown</span> <span class="o">=</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
                <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">util</span><span class="o">.</span><span class="nx">Event</span><span class="o">.</span><span class="nx">stopEvent</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(!</span><span class="nx">_button</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'disabled'</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="o">(</span><span class="nx">ev</span><span class="o">.</span><span class="nx">keyCode</span> <span class="o">!=</span> <span class="m">9</span><span class="o">))</span> <span class="o">{</span>
                    <span class="k">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="o">(</span><span class="nx">_button</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'label'</span><span class="o">),</span> <span class="m">10</span><span class="o">);</span>
                    <span class="nx">value</span><span class="o">--;</span>
                    <span class="nx">value</span> <span class="o">=</span> <span class="nx">cleanVal</span><span class="o">(</span><span class="nx">value</span><span class="o">);</span>

                    <span class="nx">_button</span><span class="o">.</span><span class="nx">set</span><span class="o">(</span><span class="s1">'label'</span><span class="o">,</span> <span class="s1">''</span><span class="o">+</span><span class="nx">value</span><span class="o">);</span>
                    <span class="k">var</span> <span class="k">label</span> <span class="o">=</span> <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">lang</span><span class="o">.</span><span class="nx">substitute</span><span class="o">(</span><span class="nx">strLabel</span><span class="o">,</span> <span class="o">{</span> <span class="nx">VALUE</span><span class="o">:</span> <span class="nx">_button</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'label'</span><span class="o">)</span> <span class="o">});</span>
                    <span class="nx">_button</span><span class="o">.</span><span class="nx">set</span><span class="o">(</span><span class="s1">'title'</span><span class="o">,</span> <span class="k">label</span><span class="o">);</span>
                    <span class="k">if</span> <span class="o">(!</span><span class="nx">br</span><span class="o">.</span><span class="nx">webkit</span> <span class="o">&amp;&amp;</span> <span class="nx">tbar</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c">//tbar.focus(); //We do this for accessibility, on the re-focus of the element, a screen reader will re-read the title that was just changed</span>
<span class="c"></span>                        <span class="c">//_button.focus();</span>
<span class="c"></span>                    <span class="o">}</span>
                    <span class="nx">self</span><span class="o">.</span><span class="nx">_buttonClick</span><span class="o">(</span><span class="nx">ev</span><span class="o">,</span> <span class="nx">oButton</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">};</span>

            <span class="k">var</span> <span class="nx">_intKeyUp</span> <span class="o">=</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">ev</span><span class="o">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="m">38</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nx">_intUp</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="nx">ev</span><span class="o">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="m">40</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nx">_intDown</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="nx">ev</span><span class="o">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="m">107</span> <span class="o">&amp;&amp;</span> <span class="nx">ev</span><span class="o">.</span><span class="nx">shiftKey</span><span class="o">)</span> <span class="o">{</span>  <span class="c">//Plus Key</span>
<span class="c"></span>                    <span class="nx">_intUp</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="nx">ev</span><span class="o">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="m">109</span> <span class="o">&amp;&amp;</span> <span class="nx">ev</span><span class="o">.</span><span class="nx">shiftKey</span><span class="o">)</span> <span class="o">{</span>  <span class="c">//Minus Key</span>
<span class="c"></span>                    <span class="nx">_intDown</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">};</span>

            <span class="c">//Handle arrow keys..</span>
<span class="c"></span>            <span class="nx">_button</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="s1">'keydown'</span><span class="o">,</span> <span class="nx">_intKeyUp</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>

            <span class="c">//Listen for the click on the up button and act on it</span>
<span class="c"></span>            <span class="c">//Listen for the click on the down button and act on it</span>
<span class="c"></span>            <span class="nx">Event</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="nx">_b1</span><span class="o">,</span> <span class="s1">'mousedown'</span><span class="o">,</span><span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
                <span class="nx">Event</span><span class="o">.</span><span class="nx">stopEvent</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
            <span class="o">},</span> <span class="k">this</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
            <span class="nx">Event</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="nx">_b2</span><span class="o">,</span> <span class="s1">'mousedown'</span><span class="o">,</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
                <span class="nx">Event</span><span class="o">.</span><span class="nx">stopEvent</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
            <span class="o">},</span> <span class="k">this</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
            <span class="nx">Event</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="nx">_b1</span><span class="o">,</span> <span class="s1">'click'</span><span class="o">,</span> <span class="nx">_intUp</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
            <span class="nx">Event</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="nx">_b2</span><span class="o">,</span> <span class="s1">'click'</span><span class="o">,</span> <span class="nx">_intDown</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @protected</span>
<span class="c">        * @method _buttonClick</span>
<span class="c">        * @description Click handler for all buttons in the toolbar.</span>
<span class="c">        * @param {String} ev The event that was passed in.</span>
<span class="c">        * @param {Object} info Object literal of information about the button that was clicked.</span>
<span class="c">        */</span>
        <span class="nx">_buttonClick</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">,</span> <span class="nx">info</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">var</span> <span class="nx">doEvent</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            
            <span class="k">if</span> <span class="o">(</span><span class="nx">ev</span> <span class="o">&amp;&amp;</span> <span class="nx">ev</span><span class="o">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">'keypress'</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">ev</span><span class="o">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="m">9</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nx">doEvent</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
                <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">((</span><span class="nx">ev</span><span class="o">.</span><span class="nx">keyCode</span> <span class="o">===</span> <span class="m">13</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="nx">ev</span><span class="o">.</span><span class="nx">keyCode</span> <span class="o">===</span> <span class="m">0</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="nx">ev</span><span class="o">.</span><span class="nx">keyCode</span> <span class="o">===</span> <span class="m">32</span><span class="o">))</span> <span class="o">{</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="nx">doEvent</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>

            <span class="k">if</span> <span class="o">(</span><span class="nx">doEvent</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">var</span> <span class="nx">fireNextEvent</span> <span class="o">=</span> <span class="kc">true</span><span class="o">,</span>
                    <span class="nx">retValue</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">info</span><span class="o">.</span><span class="nx">value</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">log</span><span class="o">(</span><span class="s1">'fireEvent::'</span> <span class="o">+</span> <span class="nx">info</span><span class="o">.</span><span class="nx">value</span> <span class="o">+</span> <span class="s1">'Click'</span><span class="o">,</span> <span class="s1">'info'</span><span class="o">,</span> <span class="s1">'Toolbar'</span><span class="o">);</span>
                    <span class="nx">retValue</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">fireEvent</span><span class="o">(</span><span class="nx">info</span><span class="o">.</span><span class="nx">value</span> <span class="o">+</span> <span class="s1">'Click'</span><span class="o">,</span> <span class="o">{</span> <span class="nx">type</span><span class="o">:</span> <span class="nx">info</span><span class="o">.</span><span class="nx">value</span> <span class="o">+</span> <span class="s1">'Click'</span><span class="o">,</span> <span class="nx">target</span><span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">),</span> <span class="nx">button</span><span class="o">:</span> <span class="nx">info</span> <span class="o">});</span>
                    <span class="k">if</span> <span class="o">(</span><span class="nx">retValue</span> <span class="o">===</span> <span class="kc">false</span><span class="o">)</span> <span class="o">{</span>
                        <span class="nx">fireNextEvent</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
                    <span class="o">}</span>
                <span class="o">}</span>
                
                <span class="k">if</span> <span class="o">(</span><span class="nx">info</span><span class="o">.</span><span class="nx">menucmd</span> <span class="o">&amp;&amp;</span> <span class="nx">fireNextEvent</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">log</span><span class="o">(</span><span class="s1">'fireEvent::'</span> <span class="o">+</span> <span class="nx">info</span><span class="o">.</span><span class="nx">menucmd</span> <span class="o">+</span> <span class="s1">'Click'</span><span class="o">,</span> <span class="s1">'info'</span><span class="o">,</span> <span class="s1">'Toolbar'</span><span class="o">);</span>
                    <span class="nx">retValue</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">fireEvent</span><span class="o">(</span><span class="nx">info</span><span class="o">.</span><span class="nx">menucmd</span> <span class="o">+</span> <span class="s1">'Click'</span><span class="o">,</span> <span class="o">{</span> <span class="nx">type</span><span class="o">:</span> <span class="nx">info</span><span class="o">.</span><span class="nx">menucmd</span> <span class="o">+</span> <span class="s1">'Click'</span><span class="o">,</span> <span class="nx">target</span><span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">),</span> <span class="nx">button</span><span class="o">:</span> <span class="nx">info</span> <span class="o">});</span>
                    <span class="k">if</span> <span class="o">(</span><span class="nx">retValue</span> <span class="o">===</span> <span class="kc">false</span><span class="o">)</span> <span class="o">{</span>
                        <span class="nx">fireNextEvent</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
                    <span class="o">}</span>
                <span class="o">}</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">fireNextEvent</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nx">YAHOO</span><span class="o">.</span><span class="nx">log</span><span class="o">(</span><span class="s1">'fireEvent::buttonClick'</span><span class="o">,</span> <span class="s1">'info'</span><span class="o">,</span> <span class="s1">'Toolbar'</span><span class="o">);</span>
                    <span class="k">this</span><span class="o">.</span><span class="nx">fireEvent</span><span class="o">(</span><span class="s1">'buttonClick'</span><span class="o">,</span> <span class="o">{</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">'buttonClick'</span><span class="o">,</span> <span class="nx">target</span><span class="o">:</span> <span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">),</span> <span class="nx">button</span><span class="o">:</span> <span class="nx">info</span> <span class="o">});</span>
                <span class="o">}</span>

                <span class="k">if</span> <span class="o">(</span><span class="nx">info</span><span class="o">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">'select'</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">var</span> <span class="nx">button</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">getButtonById</span><span class="o">(</span><span class="nx">info</span><span class="o">.</span><span class="nx">id</span><span class="o">);</span>
                    <span class="k">if</span> <span class="o">(</span><span class="nx">button</span><span class="o">.</span><span class="nx">buttonType</span> <span class="o">==</span> <span class="s1">'rich'</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">var</span> <span class="nx">txt</span> <span class="o">=</span> <span class="nx">info</span><span class="o">.</span><span class="nx">value</span><span class="o">;</span>
                        <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="m">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">info</span><span class="o">.</span><span class="nx">menu</span><span class="o">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">i</span><span class="o">++)</span> <span class="o">{</span>
                            <span class="k">if</span> <span class="o">(</span><span class="nx">info</span><span class="o">.</span><span class="nx">menu</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">value</span> <span class="o">==</span> <span class="nx">info</span><span class="o">.</span><span class="nx">value</span><span class="o">)</span> <span class="o">{</span>
                                <span class="nx">txt</span> <span class="o">=</span> <span class="nx">info</span><span class="o">.</span><span class="nx">menu</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">text</span><span class="o">;</span>
                                <span class="k">break</span><span class="o">;</span>
                            <span class="o">}</span>
                        <span class="o">}</span>
                        <span class="nx">button</span><span class="o">.</span><span class="nx">set</span><span class="o">(</span><span class="s1">'label'</span><span class="o">,</span> <span class="s1">'&lt;span class="yui-toolbar-'</span> <span class="o">+</span> <span class="nx">info</span><span class="o">.</span><span class="nx">menucmd</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="o">(</span><span class="nx">info</span><span class="o">.</span><span class="nx">value</span><span class="o">).</span><span class="nx">replace</span><span class="o">(</span><span class="sr">/ /g</span><span class="o">,</span> <span class="s1">'-'</span><span class="o">).</span><span class="nx">toLowerCase</span><span class="o">()</span> <span class="o">+</span> <span class="s1">'"&gt;'</span> <span class="o">+</span> <span class="nx">txt</span> <span class="o">+</span> <span class="s1">'&lt;/span&gt;'</span><span class="o">);</span>
                        <span class="k">var</span> <span class="nx">_items</span> <span class="o">=</span> <span class="nx">button</span><span class="o">.</span><span class="nx">getMenu</span><span class="o">().</span><span class="nx">getItems</span><span class="o">();</span>
                        <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="m">0</span><span class="o">;</span> <span class="nx">m</span> <span class="o">&lt;</span> <span class="nx">_items</span><span class="o">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">m</span><span class="o">++)</span> <span class="o">{</span>
                            <span class="k">if</span> <span class="o">(</span><span class="nx">_items</span><span class="o">[</span><span class="nx">m</span><span class="o">].</span><span class="nx">value</span><span class="o">.</span><span class="nx">toLowerCase</span><span class="o">()</span> <span class="o">==</span> <span class="nx">info</span><span class="o">.</span><span class="nx">value</span><span class="o">.</span><span class="nx">toLowerCase</span><span class="o">())</span> <span class="o">{</span>
                                <span class="nx">_items</span><span class="o">[</span><span class="nx">m</span><span class="o">].</span><span class="nx">cfg</span><span class="o">.</span><span class="nx">setProperty</span><span class="o">(</span><span class="s1">'checked'</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
                            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                                <span class="nx">_items</span><span class="o">[</span><span class="nx">m</span><span class="o">].</span><span class="nx">cfg</span><span class="o">.</span><span class="nx">setProperty</span><span class="o">(</span><span class="s1">'checked'</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
                            <span class="o">}</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nx">Event</span><span class="o">.</span><span class="nx">stopEvent</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @private</span>
<span class="c">        * @property _keyNav</span>
<span class="c">        * @description Flag to determine if the arrow nav listeners have been attached</span>
<span class="c">        * @type Boolean</span>
<span class="c">        */</span>
        <span class="nx">_keyNav</span><span class="o">:</span> <span class="kc">null</span><span class="o">,</span>
        <span class="c">/**</span>
<span class="c">        * @private</span>
<span class="c">        * @property _navCounter</span>
<span class="c">        * @description Internal counter for walking the buttons in the toolbar with the arrow keys</span>
<span class="c">        * @type Number</span>
<span class="c">        */</span>
        <span class="nx">_navCounter</span><span class="o">:</span> <span class="kc">null</span><span class="o">,</span>
        <span class="c">/**</span>
<span class="c">        * @private</span>
<span class="c">        * @method _navigateButtons</span>
<span class="c">        * @description Handles the navigation/focus of toolbar buttons with the Arrow Keys</span>
<span class="c">        * @param {Event} ev The Key Event</span>
<span class="c">        */</span>
        <span class="nx">_navigateButtons</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">ev</span><span class="o">)</span> <span class="o">{</span>
            <span class="nx">switch</span> <span class="o">(</span><span class="nx">ev</span><span class="o">.</span><span class="nx">keyCode</span><span class="o">)</span> <span class="o">{</span>
                <span class="nx">case</span> <span class="m">37</span><span class="o">:</span>
                <span class="nx">case</span> <span class="m">39</span><span class="o">:</span>
                    <span class="k">if</span> <span class="o">(</span><span class="nx">ev</span><span class="o">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="m">37</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">this</span><span class="o">.</span><span class="nx">_navCounter</span><span class="o">--;</span>
                    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="k">this</span><span class="o">.</span><span class="nx">_navCounter</span><span class="o">++;</span>
                    <span class="o">}</span>
                    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_navCounter</span> <span class="o">&gt;</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">.</span><span class="nx">length</span> <span class="o">-</span> <span class="m">1</span><span class="o">))</span> <span class="o">{</span>
                        <span class="k">this</span><span class="o">.</span><span class="nx">_navCounter</span> <span class="o">=</span> <span class="m">0</span><span class="o">;</span>
                    <span class="o">}</span>
                    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_navCounter</span> <span class="o">&lt;</span> <span class="m">0</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">this</span><span class="o">.</span><span class="nx">_navCounter</span> <span class="o">=</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">.</span><span class="nx">length</span> <span class="o">-</span> <span class="m">1</span><span class="o">);</span>
                    <span class="o">}</span>
                    <span class="k">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">[</span><span class="k">this</span><span class="o">.</span><span class="nx">_navCounter</span><span class="o">].</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">);</span>
                    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">browser</span><span class="o">.</span><span class="nx">ie</span><span class="o">)</span> <span class="o">{</span>
                        <span class="nx">el</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">[</span><span class="k">this</span><span class="o">.</span><span class="nx">_navCounter</span><span class="o">].</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">).</span><span class="nx">getElementsByTagName</span><span class="o">(</span><span class="s1">'a'</span><span class="o">)[</span><span class="m">0</span><span class="o">];</span>
                    <span class="o">}</span>
                    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">[</span><span class="k">this</span><span class="o">.</span><span class="nx">_navCounter</span><span class="o">].</span><span class="nx">get</span><span class="o">(</span><span class="s1">'disabled'</span><span class="o">))</span> <span class="o">{</span>
                        <span class="k">this</span><span class="o">.</span><span class="nx">_navigateButtons</span><span class="o">(</span><span class="nx">ev</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="nx">el</span><span class="o">.</span><span class="nx">focus</span><span class="o">();</span>
                    <span class="o">}</span>
                    <span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @private</span>
<span class="c">        * @method _handleFocus</span>
<span class="c">        * @description Sets up the listeners for the arrow key navigation</span>
<span class="c">        */</span>
        <span class="nx">_handleFocus</span><span class="o">:</span> <span class="k">function</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(!</span><span class="k">this</span><span class="o">.</span><span class="nx">_keyNav</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">var</span> <span class="nx">ev</span> <span class="o">=</span> <span class="s1">'keypress'</span><span class="o">;</span>
                <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">browser</span><span class="o">.</span><span class="nx">ie</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nx">ev</span> <span class="o">=</span> <span class="s1">'keydown'</span><span class="o">;</span>
                <span class="o">}</span>
                <span class="nx">Event</span><span class="o">.</span><span class="nx">on</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">),</span> <span class="nx">ev</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="nx">_navigateButtons</span><span class="o">,</span> <span class="k">this</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
                <span class="k">this</span><span class="o">.</span><span class="nx">_keyNav</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                <span class="k">this</span><span class="o">.</span><span class="nx">_navCounter</span> <span class="o">=</span> <span class="o">-</span><span class="m">1</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method getButtonById</span>
<span class="c">        * @description Gets a button instance from the toolbar by is Dom id.</span>
<span class="c">        * @param {String} id The Dom id to query for.</span>
<span class="c">        * @return {&lt;a href="YAHOO.widget.ToolbarButton.html"&gt;YAHOO.widget.ToolbarButton&lt;/a&gt;}</span>
<span class="c">        */</span>
        <span class="nx">getButtonById</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">id</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">.</span><span class="nx">length</span><span class="o">;</span>
            <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="m">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="o">;</span> <span class="nx">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">get</span><span class="o">(</span><span class="s1">'id'</span><span class="o">)</span> <span class="o">==</span> <span class="nx">id</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">[</span><span class="nx">i</span><span class="o">];</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method getButtonByValue</span>
<span class="c">        * @description Gets a button instance or a menuitem instance from the toolbar by it's value.</span>
<span class="c">        * @param {String} value The button value to query for.</span>
<span class="c">        * @return {&lt;a href="YAHOO.widget.ToolbarButton.html"&gt;YAHOO.widget.ToolbarButton&lt;/a&gt; or &lt;a href="YAHOO.widget.MenuItem.html"&gt;YAHOO.widget.MenuItem&lt;/a&gt;}</span>
<span class="c">        */</span>
        <span class="nx">getButtonByValue</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">value</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">var</span> <span class="nx">_buttons</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'buttons'</span><span class="o">);</span>
            <span class="k">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">_buttons</span><span class="o">.</span><span class="nx">length</span><span class="o">;</span>
            <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="m">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="o">;</span> <span class="nx">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">_buttons</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">group</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="m">0</span><span class="o">;</span> <span class="nx">m</span> <span class="o">&lt;</span> <span class="nx">_buttons</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">buttons</span><span class="o">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">m</span><span class="o">++)</span> <span class="o">{</span>
                        <span class="k">if</span> <span class="o">((</span><span class="nx">_buttons</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">buttons</span><span class="o">[</span><span class="nx">m</span><span class="o">].</span><span class="nx">value</span> <span class="o">==</span> <span class="nx">value</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="nx">_buttons</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">buttons</span><span class="o">[</span><span class="nx">m</span><span class="o">].</span><span class="nx">menucmd</span> <span class="o">==</span> <span class="nx">value</span><span class="o">))</span> <span class="o">{</span>
                            <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="nx">getButtonById</span><span class="o">(</span><span class="nx">_buttons</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">buttons</span><span class="o">[</span><span class="nx">m</span><span class="o">].</span><span class="nx">id</span><span class="o">);</span>
                        <span class="o">}</span>
                        <span class="k">if</span> <span class="o">(</span><span class="nx">_buttons</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">buttons</span><span class="o">[</span><span class="nx">m</span><span class="o">].</span><span class="nx">menu</span><span class="o">)</span> <span class="o">{</span> <span class="c">//Menu Button, loop through the values</span>
<span class="c"></span>                            <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="m">0</span><span class="o">;</span> <span class="nx">s</span> <span class="o">&lt;</span> <span class="nx">_buttons</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">buttons</span><span class="o">[</span><span class="nx">m</span><span class="o">].</span><span class="nx">menu</span><span class="o">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">s</span><span class="o">++)</span> <span class="o">{</span>
                                <span class="k">if</span> <span class="o">(</span><span class="nx">_buttons</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">buttons</span><span class="o">[</span><span class="nx">m</span><span class="o">].</span><span class="nx">menu</span><span class="o">[</span><span class="nx">s</span><span class="o">].</span><span class="nx">value</span> <span class="o">==</span> <span class="nx">value</span><span class="o">)</span> <span class="o">{</span>
                                    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="nx">getButtonById</span><span class="o">(</span><span class="nx">_buttons</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">buttons</span><span class="o">[</span><span class="nx">m</span><span class="o">].</span><span class="nx">id</span><span class="o">);</span>
                                <span class="o">}</span>
                            <span class="o">}</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">((</span><span class="nx">_buttons</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">value</span> <span class="o">==</span> <span class="nx">value</span><span class="o">)</span> <span class="o">||</span> <span class="o">(</span><span class="nx">_buttons</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">menucmd</span> <span class="o">==</span> <span class="nx">value</span><span class="o">))</span> <span class="o">{</span>
                        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="nx">getButtonById</span><span class="o">(</span><span class="nx">_buttons</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">id</span><span class="o">);</span>
                    <span class="o">}</span>
                    <span class="k">if</span> <span class="o">(</span><span class="nx">_buttons</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">menu</span><span class="o">)</span> <span class="o">{</span> <span class="c">//Menu Button, loop through the values</span>
<span class="c"></span>                        <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="m">0</span><span class="o">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">_buttons</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">menu</span><span class="o">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">j</span><span class="o">++)</span> <span class="o">{</span>
                            <span class="k">if</span> <span class="o">(</span><span class="nx">_buttons</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">menu</span><span class="o">[</span><span class="nx">j</span><span class="o">].</span><span class="nx">value</span> <span class="o">==</span> <span class="nx">value</span><span class="o">)</span> <span class="o">{</span>
                                <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="nx">getButtonById</span><span class="o">(</span><span class="nx">_buttons</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">id</span><span class="o">);</span>
                            <span class="o">}</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method getButtonByIndex</span>
<span class="c">        * @description Gets a button instance from the toolbar by is index in _buttonList.</span>
<span class="c">        * @param {Number} index The index of the button in _buttonList.</span>
<span class="c">        * @return {&lt;a href="YAHOO.widget.ToolbarButton.html"&gt;YAHOO.widget.ToolbarButton&lt;/a&gt;}</span>
<span class="c">        */</span>
        <span class="nx">getButtonByIndex</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">index</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">[</span><span class="nx">index</span><span class="o">])</span> <span class="o">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">[</span><span class="nx">index</span><span class="o">];</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method getButtons</span>
<span class="c">        * @description Returns an array of buttons in the current toolbar</span>
<span class="c">        * @return {Array}</span>
<span class="c">        */</span>
        <span class="nx">getButtons</span><span class="o">:</span> <span class="k">function</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">;</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method disableButton</span>
<span class="c">        * @description Disables a button in the toolbar.</span>
<span class="c">        * @param {String/Number} id Disable a button by it's id, index or value.</span>
<span class="c">        * @return {Boolean}</span>
<span class="c">        */</span>
        <span class="nx">disableButton</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">id</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">var</span> <span class="nx">button</span> <span class="o">=</span> <span class="nx">getButton</span><span class="o">.</span><span class="nx">call</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="nx">id</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="nx">button</span><span class="o">)</span> <span class="o">{</span>
                <span class="nx">button</span><span class="o">.</span><span class="nx">set</span><span class="o">(</span><span class="s1">'disabled'</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method enableButton</span>
<span class="c">        * @description Enables a button in the toolbar.</span>
<span class="c">        * @param {String/Number} id Enable a button by it's id, index or value.</span>
<span class="c">        * @return {Boolean}</span>
<span class="c">        */</span>
        <span class="nx">enableButton</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">id</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'disabled'</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">var</span> <span class="nx">button</span> <span class="o">=</span> <span class="nx">getButton</span><span class="o">.</span><span class="nx">call</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="nx">id</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="nx">button</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">button</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'disabled'</span><span class="o">))</span> <span class="o">{</span>
                    <span class="nx">button</span><span class="o">.</span><span class="nx">set</span><span class="o">(</span><span class="s1">'disabled'</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method isSelected</span>
<span class="c">        * @description Tells if a button is selected or not.</span>
<span class="c">        * @param {String/Number} id A button by it's id, index or value.</span>
<span class="c">        * @return {Boolean}</span>
<span class="c">        */</span>
        <span class="nx">isSelected</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">id</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">var</span> <span class="nx">button</span> <span class="o">=</span> <span class="nx">getButton</span><span class="o">.</span><span class="nx">call</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="nx">id</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="nx">button</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="nx">button</span><span class="o">.</span><span class="nx">_selected</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method selectButton</span>
<span class="c">        * @description Selects a button in the toolbar.</span>
<span class="c">        * @param {String/Number} id Select a button by it's id, index or value.</span>
<span class="c">        * @param {String} value If this is a Menu Button, check this item in the menu</span>
<span class="c">        * @return {Boolean}</span>
<span class="c">        */</span>
        <span class="nx">selectButton</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">id</span><span class="o">,</span> <span class="nx">value</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">var</span> <span class="nx">button</span> <span class="o">=</span> <span class="nx">getButton</span><span class="o">.</span><span class="nx">call</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="nx">id</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="nx">button</span><span class="o">)</span> <span class="o">{</span>
                <span class="nx">button</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="s1">'yui-button-selected'</span><span class="o">);</span>
                <span class="nx">button</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="s1">'yui-button-'</span> <span class="o">+</span> <span class="nx">button</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'value'</span><span class="o">)</span> <span class="o">+</span> <span class="s1">'-selected'</span><span class="o">);</span>
                <span class="nx">button</span><span class="o">.</span><span class="nx">_selected</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">value</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="nx">button</span><span class="o">.</span><span class="nx">buttonType</span> <span class="o">==</span> <span class="s1">'rich'</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">var</span> <span class="nx">_items</span> <span class="o">=</span> <span class="nx">button</span><span class="o">.</span><span class="nx">getMenu</span><span class="o">().</span><span class="nx">getItems</span><span class="o">();</span>
                        <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="m">0</span><span class="o">;</span> <span class="nx">m</span> <span class="o">&lt;</span> <span class="nx">_items</span><span class="o">.</span><span class="nx">length</span><span class="o">;</span> <span class="nx">m</span><span class="o">++)</span> <span class="o">{</span>
                            <span class="k">if</span> <span class="o">(</span><span class="nx">_items</span><span class="o">[</span><span class="nx">m</span><span class="o">].</span><span class="nx">value</span> <span class="o">==</span> <span class="nx">value</span><span class="o">)</span> <span class="o">{</span>
                                <span class="nx">_items</span><span class="o">[</span><span class="nx">m</span><span class="o">].</span><span class="nx">cfg</span><span class="o">.</span><span class="nx">setProperty</span><span class="o">(</span><span class="s1">'checked'</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
                                <span class="nx">button</span><span class="o">.</span><span class="nx">set</span><span class="o">(</span><span class="s1">'label'</span><span class="o">,</span> <span class="s1">'&lt;span class="yui-toolbar-'</span> <span class="o">+</span> <span class="nx">button</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'value'</span><span class="o">)</span> <span class="o">+</span> <span class="s1">'-'</span> <span class="o">+</span> <span class="o">(</span><span class="nx">value</span><span class="o">).</span><span class="nx">replace</span><span class="o">(</span><span class="sr">/ /g</span><span class="o">,</span> <span class="s1">'-'</span><span class="o">).</span><span class="nx">toLowerCase</span><span class="o">()</span> <span class="o">+</span> <span class="s1">'"&gt;'</span> <span class="o">+</span> <span class="nx">_items</span><span class="o">[</span><span class="nx">m</span><span class="o">].</span><span class="nx">_oText</span><span class="o">.</span><span class="nx">nodeValue</span> <span class="o">+</span> <span class="s1">'&lt;/span&gt;'</span><span class="o">);</span>
                            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                                <span class="nx">_items</span><span class="o">[</span><span class="nx">m</span><span class="o">].</span><span class="nx">cfg</span><span class="o">.</span><span class="nx">setProperty</span><span class="o">(</span><span class="s1">'checked'</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
                            <span class="o">}</span>
                        <span class="o">}</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method deselectButton</span>
<span class="c">        * @description Deselects a button in the toolbar.</span>
<span class="c">        * @param {String/Number} id Deselect a button by it's id, index or value.</span>
<span class="c">        * @return {Boolean}</span>
<span class="c">        */</span>
        <span class="nx">deselectButton</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">id</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">var</span> <span class="nx">button</span> <span class="o">=</span> <span class="nx">getButton</span><span class="o">.</span><span class="nx">call</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="nx">id</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="nx">button</span><span class="o">)</span> <span class="o">{</span>
                <span class="nx">button</span><span class="o">.</span><span class="nx">removeClass</span><span class="o">(</span><span class="s1">'yui-button-selected'</span><span class="o">);</span>
                <span class="nx">button</span><span class="o">.</span><span class="nx">removeClass</span><span class="o">(</span><span class="s1">'yui-button-'</span> <span class="o">+</span> <span class="nx">button</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'value'</span><span class="o">)</span> <span class="o">+</span> <span class="s1">'-selected'</span><span class="o">);</span>
                <span class="nx">button</span><span class="o">.</span><span class="nx">removeClass</span><span class="o">(</span><span class="s1">'yui-button-hover'</span><span class="o">);</span>
                <span class="nx">button</span><span class="o">.</span><span class="nx">_selected</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method deselectAllButtons</span>
<span class="c">        * @description Deselects all buttons in the toolbar.</span>
<span class="c">        * @return {Boolean}</span>
<span class="c">        */</span>
        <span class="nx">deselectAllButtons</span><span class="o">:</span> <span class="k">function</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">.</span><span class="nx">length</span><span class="o">;</span>
            <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="m">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="o">;</span> <span class="nx">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="nx">deselectButton</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">[</span><span class="nx">i</span><span class="o">]);</span>
            <span class="o">}</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method disableAllButtons</span>
<span class="c">        * @description Disables all buttons in the toolbar.</span>
<span class="c">        * @return {Boolean}</span>
<span class="c">        */</span>
        <span class="nx">disableAllButtons</span><span class="o">:</span> <span class="k">function</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'disabled'</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">.</span><span class="nx">length</span><span class="o">;</span>
            <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="m">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="o">;</span> <span class="nx">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="nx">disableButton</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">[</span><span class="nx">i</span><span class="o">]);</span>
            <span class="o">}</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method enableAllButtons</span>
<span class="c">        * @description Enables all buttons in the toolbar.</span>
<span class="c">        * @return {Boolean}</span>
<span class="c">        */</span>
        <span class="nx">enableAllButtons</span><span class="o">:</span> <span class="k">function</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'disabled'</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">.</span><span class="nx">length</span><span class="o">;</span>
            <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="m">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="o">;</span> <span class="nx">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="nx">enableButton</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">[</span><span class="nx">i</span><span class="o">]);</span>
            <span class="o">}</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method resetAllButtons</span>
<span class="c">        * @description Resets all buttons to their initial state.</span>
<span class="c">        * @param {Object} _ex Except these buttons</span>
<span class="c">        * @return {Boolean}</span>
<span class="c">        */</span>
        <span class="nx">resetAllButtons</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">_ex</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(!</span><span class="nx">Lang</span><span class="o">.</span><span class="nx">isObject</span><span class="o">(</span><span class="nx">_ex</span><span class="o">))</span> <span class="o">{</span>
                <span class="nx">_ex</span> <span class="o">=</span> <span class="o">{};</span>
            <span class="o">}</span>
            <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'disabled'</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">.</span><span class="nx">length</span><span class="o">;</span>
            <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="m">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="o">;</span> <span class="nx">i</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">var</span> <span class="nx">_button</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">[</span><span class="nx">i</span><span class="o">];</span>
                <span class="k">var</span> <span class="nx">disabled</span> <span class="o">=</span> <span class="nx">_button</span><span class="o">.</span><span class="nx">_configs</span><span class="o">.</span><span class="nx">disabled</span><span class="o">.</span><span class="nx">_initialConfig</span><span class="o">.</span><span class="nx">value</span><span class="o">;</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">_ex</span><span class="o">[</span><span class="nx">_button</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'id'</span><span class="o">)])</span> <span class="o">{</span>
                    <span class="k">this</span><span class="o">.</span><span class="nx">enableButton</span><span class="o">(</span><span class="nx">_button</span><span class="o">);</span>
                    <span class="k">this</span><span class="o">.</span><span class="nx">selectButton</span><span class="o">(</span><span class="nx">_button</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="nx">disabled</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">this</span><span class="o">.</span><span class="nx">disableButton</span><span class="o">(</span><span class="nx">_button</span><span class="o">);</span>
                    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="k">this</span><span class="o">.</span><span class="nx">enableButton</span><span class="o">(</span><span class="nx">_button</span><span class="o">);</span>
                    <span class="o">}</span>
                    <span class="k">this</span><span class="o">.</span><span class="nx">deselectButton</span><span class="o">(</span><span class="nx">_button</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method destroyButton</span>
<span class="c">        * @description Destroy a button in the toolbar.</span>
<span class="c">        * @param {String/Number} id Destroy a button by it's id or index.</span>
<span class="c">        * @return {Boolean}</span>
<span class="c">        */</span>
        <span class="nx">destroyButton</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">id</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">var</span> <span class="nx">button</span> <span class="o">=</span> <span class="nx">getButton</span><span class="o">.</span><span class="nx">call</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="nx">id</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="nx">button</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">var</span> <span class="nx">thisID</span> <span class="o">=</span> <span class="nx">button</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'id'</span><span class="o">);</span>
                <span class="nx">button</span><span class="o">.</span><span class="nx">destroy</span><span class="o">();</span>

                <span class="k">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">.</span><span class="nx">length</span><span class="o">;</span>
                <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="m">0</span><span class="o">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="o">;</span> <span class="nx">i</span><span class="o">++)</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">[</span><span class="nx">i</span><span class="o">].</span><span class="nx">get</span><span class="o">(</span><span class="s1">'id'</span><span class="o">)</span> <span class="o">==</span> <span class="nx">thisID</span><span class="o">)</span> <span class="o">{</span>
                        <span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">[</span><span class="nx">i</span><span class="o">]</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method destroy</span>
<span class="c">        * @description Destroys the toolbar, all of it's elements and objects.</span>
<span class="c">        * @return {Boolean}</span>
<span class="c">        */</span>
        <span class="nx">destroy</span><span class="o">:</span> <span class="k">function</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">''</span><span class="o">;</span>
            <span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">).</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">''</span><span class="o">;</span>
            <span class="c">//Brutal Object Destroy</span>
<span class="c"></span>            <span class="k">for</span> <span class="o">(</span><span class="k">var</span> <span class="nx">i</span> <span class="k">in</span> <span class="k">this</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">Lang</span><span class="o">.</span><span class="nx">hasOwnProperty</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="nx">i</span><span class="o">))</span> <span class="o">{</span>
                    <span class="k">this</span><span class="o">[</span><span class="nx">i</span><span class="o">]</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method collapse</span>
<span class="c">        * @description Programatically collapse the toolbar.</span>
<span class="c">        * @param {Boolean} collapse True to collapse, false to expand.</span>
<span class="c">        */</span>
        <span class="nx">collapse</span><span class="o">:</span> <span class="k">function</span><span class="o">(</span><span class="nx">collapse</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">Dom</span><span class="o">.</span><span class="nx">getElementsByClassName</span><span class="o">(</span><span class="s1">'collapse'</span><span class="o">,</span> <span class="s1">'span'</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="nx">_titlebar</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="nx">collapse</span> <span class="o">===</span> <span class="kc">false</span><span class="o">)</span> <span class="o">{</span>
                <span class="nx">Dom</span><span class="o">.</span><span class="nx">removeClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'cont'</span><span class="o">).</span><span class="nx">parentNode</span><span class="o">,</span> <span class="s1">'yui-toolbar-container-collapsed'</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">el</span><span class="o">[</span><span class="m">0</span><span class="o">])</span> <span class="o">{</span>
                    <span class="nx">Dom</span><span class="o">.</span><span class="nx">removeClass</span><span class="o">(</span><span class="nx">el</span><span class="o">[</span><span class="m">0</span><span class="o">],</span> <span class="s1">'collapsed'</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="k">this</span><span class="o">.</span><span class="nx">fireEvent</span><span class="o">(</span><span class="s1">'toolbarExpanded'</span><span class="o">,</span> <span class="o">{</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">'toolbarExpanded'</span><span class="o">,</span> <span class="nx">target</span><span class="o">:</span> <span class="k">this</span> <span class="o">});</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="nx">el</span><span class="o">[</span><span class="m">0</span><span class="o">])</span> <span class="o">{</span>
                    <span class="nx">Dom</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="nx">el</span><span class="o">[</span><span class="m">0</span><span class="o">],</span> <span class="s1">'collapsed'</span><span class="o">);</span>
                <span class="o">}</span>
                <span class="nx">Dom</span><span class="o">.</span><span class="nx">addClass</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'cont'</span><span class="o">).</span><span class="nx">parentNode</span><span class="o">,</span> <span class="s1">'yui-toolbar-container-collapsed'</span><span class="o">);</span>
                <span class="k">this</span><span class="o">.</span><span class="nx">fireEvent</span><span class="o">(</span><span class="s1">'toolbarCollapsed'</span><span class="o">,</span> <span class="o">{</span> <span class="nx">type</span><span class="o">:</span> <span class="s1">'toolbarCollapsed'</span><span class="o">,</span> <span class="nx">target</span><span class="o">:</span> <span class="k">this</span> <span class="o">});</span>
            <span class="o">}</span>
        <span class="o">},</span>
        <span class="c">/**</span>
<span class="c">        * @method toString</span>
<span class="c">        * @description Returns a string representing the toolbar.</span>
<span class="c">        * @return {String}</span>
<span class="c">        */</span>
        <span class="nx">toString</span><span class="o">:</span> <span class="k">function</span><span class="o">()</span> <span class="o">{</span>
            <span class="k">return</span> <span class="s1">'Toolbar (#'</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="nx">get</span><span class="o">(</span><span class="s1">'element'</span><span class="o">).</span><span class="nx">id</span> <span class="o">+</span> <span class="s1">') with '</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="nx">_buttonList</span><span class="o">.</span><span class="nx">length</span> <span class="o">+</span> <span class="s1">' buttons.'</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">});</span>
<span class="c">/**</span>
<span class="c">* @event buttonClick</span>
<span class="c">* @param {Object} o The object passed to this handler is the button config used to create the button.</span>
<span class="c">* @description Fires when any botton receives a click event. Passes back a single object representing the buttons config object. See &lt;a href="YAHOO.util.Element.html#addListener"&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<span class="c">* @type YAHOO.util.CustomEvent</span>
<span class="c">*/</span>
<span class="c">/**</span>
<span class="c">* @event valueClick</span>
<span class="c">* @param {Object} o The object passed to this handler is the button config used to create the button.</span>
<span class="c">* @description This is a special dynamic event that is created and dispatched based on the value property</span>
<span class="c">* of the button config. See &lt;a href="YAHOO.util.Element.html#addListener"&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<span class="c">* Example:</span>
<span class="c">* &lt;code&gt;&lt;pre&gt;</span>
<span class="c">* buttons : [</span>
<span class="c">*   { type: 'button', value: 'test', value: 'testButton' }</span>
<span class="c">* ]&lt;/pre&gt;</span>
<span class="c">* &lt;/code&gt;</span>
<span class="c">* With the valueClick event you could subscribe to this buttons click event with this:</span>
<span class="c">* tbar.in('testButtonClick', function() { alert('test button clicked'); })</span>
<span class="c">* @type YAHOO.util.CustomEvent</span>
<span class="c">*/</span>
<span class="c">/**</span>
<span class="c">* @event toolbarExpanded</span>
<span class="c">* @description Fires when the toolbar is expanded via the collapse button. See &lt;a href="YAHOO.util.Element.html#addListener"&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<span class="c">* @type YAHOO.util.CustomEvent</span>
<span class="c">*/</span>
<span class="c">/**</span>
<span class="c">* @event toolbarCollapsed</span>
<span class="c">* @description Fires when the toolbar is collapsed via the collapse button. See &lt;a href="YAHOO.util.Element.html#addListener"&gt;Element.addListener&lt;/a&gt; for more information on listening for this event.</span>
<span class="c">* @type YAHOO.util.CustomEvent</span>
<span class="c">*/</span>
<span class="o">})();</span>
</pre></div>
                    </div>
			</div>
		</div>
		<div class="yui-b">
            <div class="nav">

                    <div class="module">
                        <h4>Modules</h4>
                        <ul class="content"><li class=""><a href="module_animation.html">animation</a></li>

                                <li class=""><a href="module_autocomplete.html">autocomplete</a></li>

                                <li class=""><a href="module_button.html">button</a></li>

                                <li class=""><a href="module_calendar.html">calendar</a></li>

                                <li class=""><a href="module_charts.html">charts</a></li>

                                <li class=""><a href="module_colorpicker.html">colorpicker</a></li>

                                <li class=""><a href="module_connection.html">connection</a></li>

                                <li class=""><a href="module_container.html">container</a></li>

                                <li class=""><a href="module_cookie.html">cookie</a></li>

                                <li class=""><a href="module_datasource.html">datasource</a></li>

                                <li class=""><a href="module_datatable.html">datatable</a></li>

                                <li class=""><a href="module_dom.html">dom</a></li>

                                <li class=""><a href="module_dragdrop.html">dragdrop</a></li>

                                <li class="selected"><a href="module_editor.html">editor</a></li>

                                <li class=""><a href="module_element.html">element</a></li>

                                <li class=""><a href="module_event.html">event</a></li>

                                <li class=""><a href="module_get.html">get</a></li>

                                <li class=""><a href="module_history.html">history</a></li>

                                <li class=""><a href="module_imagecropper.html">imagecropper</a></li>

                                <li class=""><a href="module_imageloader.html">imageloader</a></li>

                                <li class=""><a href="module_json.html">json</a></li>

                                <li class=""><a href="module_layout.html">layout</a></li>

                                <li class=""><a href="module_logger.html">logger</a></li>

                                <li class=""><a href="module_menu.html">menu</a></li>

                                <li class=""><a href="module_profiler.html">profiler</a></li>

                                <li class=""><a href="module_profilerviewer.html">profilerviewer</a></li>

                                <li class=""><a href="module_resize.html">resize</a></li>

                                <li class=""><a href="module_selector.html">selector</a></li>

                                <li class=""><a href="module_slider.html">slider</a></li>

                                <li class=""><a href="module_tabview.html">tabview</a></li>

                                <li class=""><a href="module_treeview.html">treeview</a></li>

                                <li class=""><a href="module_uploader.html">uploader</a></li>

                                <li class=""><a href="module_yahoo.html">yahoo</a></li>

                                <li class=""><a href="module_yuiloader.html">yuiloader</a></li>

                                <li class=""><a href="module_yuitest.html">yuitest</a></li>
                        </ul></div>

                    <div class="module">
                        <h4>Classes</h4>
                        <ul class="content"><li class=""><a href="YAHOO.widget.Editor.html">YAHOO.widget.Editor</a></li>
                                <li class=""><a href="YAHOO.widget.EditorInfo.html">YAHOO.widget.EditorInfo</a></li>
                                <li class=""><a href="YAHOO.widget.EditorWindow.html">YAHOO.widget.EditorWindow</a></li>
                                <li class=""><a href="YAHOO.widget.SimpleEditor.html">YAHOO.widget.SimpleEditor</a></li>
                                <li class=""><a href="YAHOO.widget.Toolbar.html">YAHOO.widget.Toolbar</a></li>
                                <li class=""><a href="YAHOO.widget.ToolbarButton.html">YAHOO.widget.ToolbarButton</a></li>
                                <li class=""><a href="YAHOO.widget.ToolbarButtonAdvanced.html">YAHOO.widget.ToolbarButtonAdvanced</a></li>
                        </ul></div>

                    <div class="module">
                        <h4>Files</h4>
                        <ul class="content"><li class=""><a href="editor.js.html">editor.js</a></li>
                                <li class=""><a href="simple-editor.js.html">simple-editor.js</a></li>
                                <li class=""><a href="toolbar-button.js.html">toolbar-button.js</a></li>
                                <li class="selected"><a href="toolbar.js.html">toolbar.js</a></li>
                        </ul></div>





            </div>
		</div>
	</div>
	<div id="ft">
        <hr>
        Copyright Â© 2007 Yahoo! Inc. All rights reserved.
	</div>
</div></body>